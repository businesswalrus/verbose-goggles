(()=>{"use strict";var e={388:function(e,t,r){r.r(t),r.d(t,{i:()=>nh});var n,o,i,a,s,c,l,u,f,p,d,h,y,m,v,g,b,w,A,_,E,S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},O={},F={},j={},I={},P={exports:{}};P.exports,n=P.exports,function(e){var t=n&&!n.nodeType&&n,r=P&&!P.nodeType&&P,o="object"==typeof S&&S;(o.global===o||o.window===o||o.self===o)&&(e=o);var i,a,s=/^xn--/,c=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,p=String.fromCharCode;function d(e){throw RangeError(u[e])}function h(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function y(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+h((e=e.replace(l,".")).split("."),t).join(".")}function m(e){for(var t,r,n=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?(64512&(r=e.charCodeAt(o++)))==56320?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function v(e){return h(e,function(e){var t="";return e>65535&&(e-=65536,t+=p(e>>>10&1023|55296),e=56320|1023&e),t+=p(e)}).join("")}function g(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function b(e,t,r){var n=0;for(e=r?f(e/700):e>>1,e+=f(e/t);e>455;n+=36)e=f(e/35);return f(n+36*e/(e+38))}function w(e){var t,r,n,o,i,a,s,c,l,u,p,h=[],y=e.length,m=0,g=128,w=72;for((n=e.lastIndexOf("-"))<0&&(n=0),o=0;o<n;++o)e.charCodeAt(o)>=128&&d("not-basic"),h.push(e.charCodeAt(o));for(i=n>0?n+1:0;i<y;){for(a=m,s=1,c=36;i>=y&&d("invalid-input"),((l=(t=e.charCodeAt(i++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36)>=36||l>f((0x7fffffff-m)/s))&&d("overflow"),m+=l*s,!(l<(u=c<=w?1:c>=w+26?26:c-w));c+=36){s>f(0x7fffffff/(p=36-u))&&d("overflow"),s*=p}w=b(m-a,r=h.length+1,0==a),f(m/r)>0x7fffffff-g&&d("overflow"),g+=f(m/r),m%=r,h.splice(m++,0,g)}return v(h)}function A(e){var t,r,n,o,i,a,s,c,l,u,h,y,v,w,A,_=[];for(a=0,y=(e=m(e)).length,t=128,r=0,i=72;a<y;++a)(h=e[a])<128&&_.push(p(h));for(n=o=_.length,o&&_.push("-");n<y;){for(s=0x7fffffff,a=0;a<y;++a)(h=e[a])>=t&&h<s&&(s=h);for(s-t>f((0x7fffffff-r)/(v=n+1))&&d("overflow"),r+=(s-t)*v,t=s,a=0;a<y;++a)if((h=e[a])<t&&++r>0x7fffffff&&d("overflow"),h==t){for(c=r,l=36;!(c<(u=l<=i?1:l>=i+26?26:l-i));l+=36)A=c-u,w=36-u,_.push(p(g(u+A%w,0))),c=f(A/w);_.push(p(g(c,0))),i=b(r,v,n==o),r=0,++n}++r,++t}return _.join("")}if(i={version:"1.4.1",ucs2:{decode:m,encode:v},decode:w,encode:A,toASCII:function(e){return y(e,function(e){return c.test(e)?"xn--"+A(e):e})},toUnicode:function(e){return y(e,function(e){return s.test(e)?w(e.slice(4).toLowerCase()):e})}},t&&r){if(P.exports==t)r.exports=i;else for(a in i)i.hasOwnProperty(a)&&(t[a]=i[a])}else e.punycode=i}(S);var T=P.exports,x=TypeError;let k=function(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r}(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var D="function"==typeof Map&&Map.prototype,C=Object.getOwnPropertyDescriptor&&D?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,R=D&&C&&"function"==typeof C.get?C.get:null,z=D&&Map.prototype.forEach,M="function"==typeof Set&&Set.prototype,L=Object.getOwnPropertyDescriptor&&M?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,N=M&&L&&"function"==typeof L.get?L.get:null,$=M&&Set.prototype.forEach,Z="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,G="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,U="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,q=Boolean.prototype.valueOf,B=Object.prototype.toString,H=Function.prototype.toString,V=String.prototype.match,W=String.prototype.slice,Q=String.prototype.replace,K=String.prototype.toUpperCase,J=String.prototype.toLowerCase,Y=RegExp.prototype.test,X=Array.prototype.concat,ee=Array.prototype.join,et=Array.prototype.slice,er=Math.floor,en="function"==typeof BigInt?BigInt.prototype.valueOf:null,eo=Object.getOwnPropertySymbols,ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,ea="function"==typeof Symbol&&"object"==typeof Symbol.iterator,es="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ea?"object":"symbol")?Symbol.toStringTag:null,ec=Object.prototype.propertyIsEnumerable,el=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function eu(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||Y.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-er(-e):er(e);if(n!==e){var o=String(n),i=W.call(t,o.length+1);return Q.call(o,r,"$&_")+"."+Q.call(Q.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Q.call(t,r,"$&_")}var ef=k.custom,ep=eb(ef)?ef:null,ed={__proto__:null,double:'"',single:"'"},eh={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},ey=function e(t,r,n,o){var i,a,s,c,l,u=r||{};if(eA(u,"quoteStyle")&&!eA(ed,u.quoteStyle))throw TypeError('option "quoteStyle" must be "single" or "double"');if(eA(u,"maxStringLength")&&("number"==typeof u.maxStringLength?u.maxStringLength<0&&u.maxStringLength!==1/0:null!==u.maxStringLength))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var f=!eA(u,"customInspect")||u.customInspect;if("boolean"!=typeof f&&"symbol"!==f)throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(eA(u,"indent")&&null!==u.indent&&"	"!==u.indent&&!(parseInt(u.indent,10)===u.indent&&u.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(eA(u,"numericSeparator")&&"boolean"!=typeof u.numericSeparator)throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var p=u.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return function e(t,r){if(t.length>r.maxStringLength){var n=t.length-r.maxStringLength;return e(W.call(t,0,r.maxStringLength),r)+("... "+n)+" more character"+(n>1?"s":"")}var o=eh[r.quoteStyle||"single"];return o.lastIndex=0,em(Q.call(Q.call(t,o,"\\$1"),/[\x00-\x1f]/g,eS),"single",r)}(t,u);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var d=String(t);return p?eu(t,d):d}if("bigint"==typeof t){var h=String(t)+"n";return p?eu(t,h):h}var y=void 0===u.depth?5:u.depth;if(void 0===n&&(n=0),n>=y&&y>0&&"object"==typeof t)return ev(t)?"[Array]":"[Object]";var m=function(e,t){var r;if("	"===e.indent)r="	";else{if("number"!=typeof e.indent||!(e.indent>0))return null;r=ee.call(Array(e.indent+1)," ")}return{base:r,prev:ee.call(Array(t+1),r)}}(u,n);if(void 0===o)o=[];else if(eE(o,t)>=0)return"[Circular]";function v(t,r,i){if(r&&(o=et.call(o)).push(r),i){var a={depth:u.depth};return eA(u,"quoteStyle")&&(a.quoteStyle=u.quoteStyle),e(t,a,n+1,o)}return e(t,u,n+1,o)}if("function"==typeof t&&!eg(t)){var g=function(e){if(e.name)return e.name;var t=V.call(H.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),b=eP(t,v);return"[Function"+(g?": "+g:" (anonymous)")+"]"+(b.length>0?" { "+ee.call(b,", ")+" }":"")}if(eb(t)){var w=ea?Q.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):ei.call(t);return"object"!=typeof t||ea?w:eO(w)}if((A=t)&&"object"==typeof A&&("undefined"!=typeof HTMLElement&&A instanceof HTMLElement||"string"==typeof A.nodeName&&"function"==typeof A.getAttribute)){for(var A,_,E="<"+J.call(String(t.nodeName)),O=t.attributes||[],F=0;F<O.length;F++){E+=" "+O[F].name+"="+em((_=O[F].value,Q.call(String(_),/"/g,"&quot;")),"double",u)}return E+=">",t.childNodes&&t.childNodes.length&&(E+="..."),E+="</"+J.call(String(t.nodeName))+">"}if(ev(t)){if(0===t.length)return"[]";var j=eP(t,v);return m&&!function(e){for(var t=0;t<e.length;t++)if(eE(e[t],"\n")>=0)return!1;return!0}(j)?"["+eI(j,m)+"]":"[ "+ee.call(j,", ")+" ]"}if("[object Error]"===e_(i=t)&&(!es||!("object"==typeof i&&es in i))){var I=eP(t,v);return"cause"in Error.prototype||!("cause"in t)||ec.call(t,"cause")?0===I.length?"["+String(t)+"]":"{ ["+String(t)+"] "+ee.call(I,", ")+" }":"{ ["+String(t)+"] "+ee.call(X.call("[cause]: "+v(t.cause),I),", ")+" }"}if("object"==typeof t&&f){if(ep&&"function"==typeof t[ep]&&k)return k(t,{depth:y-n});if("symbol"!==f&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!R||!e||"object"!=typeof e)return!1;try{R.call(e);try{N.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var P=[];return z&&z.call(t,function(e,r){P.push(v(r,t,!0)+" => "+v(e,t))}),ej("Map",R.call(t),P,m)}if(function(e){if(!N||!e||"object"!=typeof e)return!1;try{N.call(e);try{R.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var T=[];return $&&$.call(t,function(e){T.push(v(e,t))}),ej("Set",N.call(t),T,m)}if(function(e){if(!Z||!e||"object"!=typeof e)return!1;try{Z.call(e,Z);try{G.call(e,G)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return eF("WeakMap");if(function(e){if(!G||!e||"object"!=typeof e)return!1;try{G.call(e,G);try{Z.call(e,Z)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return eF("WeakSet");if(function(e){if(!U||!e||"object"!=typeof e)return!1;try{return U.call(e),!0}catch(e){}return!1}(t))return eF("WeakRef");if("[object Number]"===e_(a=t)&&(!es||!("object"==typeof a&&es in a)))return eO(v(Number(t)));if(function(e){if(!e||"object"!=typeof e||!en)return!1;try{return en.call(e),!0}catch(e){}return!1}(t))return eO(v(en.call(t)));if("[object Boolean]"===e_(s=t)&&(!es||!("object"==typeof s&&es in s)))return eO(q.call(t));if("[object String]"===e_(c=t)&&(!es||!("object"==typeof c&&es in c)))return eO(v(String(t)));if("undefined"!=typeof window&&t===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&t===globalThis||void 0!==S&&t===S)return"{ [object globalThis] }";if(!("[object Date]"===e_(l=t)&&(!es||!("object"==typeof l&&es in l)))&&!eg(t)){var x=eP(t,v),D=el?el(t)===Object.prototype:t instanceof Object||t.constructor===Object,C=t instanceof Object?"":"null prototype",M=!D&&es&&Object(t)===t&&es in t?W.call(e_(t),8,-1):C?"Object":"",L=(D||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(M||C?"["+ee.call(X.call([],M||[],C||[]),": ")+"] ":"");return 0===x.length?L+"{}":m?L+"{"+eI(x,m)+"}":L+"{ "+ee.call(x,", ")+" }"}return String(t)};function em(e,t,r){var n=ed[r.quoteStyle||t];return n+e+n}function ev(e){return"[object Array]"===e_(e)&&(!es||!("object"==typeof e&&es in e))}function eg(e){return"[object RegExp]"===e_(e)&&(!es||!("object"==typeof e&&es in e))}function eb(e){if(ea)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!ei)return!1;try{return ei.call(e),!0}catch(e){}return!1}var ew=Object.prototype.hasOwnProperty||function(e){return e in this};function eA(e,t){return ew.call(e,t)}function e_(e){return B.call(e)}function eE(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1}function eS(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+K.call(t.toString(16))}function eO(e){return"Object("+e+")"}function eF(e){return e+" { ? }"}function ej(e,t,r,n){return e+" ("+t+") {"+(n?eI(r,n):ee.call(r,", "))+"}"}function eI(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+ee.call(e,","+r)+"\n"+t.prev}function eP(e,t){var r,n=ev(e),o=[];if(n){o.length=e.length;for(var i=0;i<e.length;i++)o[i]=eA(e,i)?t(e[i],e):""}var a="function"==typeof eo?eo(e):[];if(ea){r={};for(var s=0;s<a.length;s++)r["$"+a[s]]=a[s]}for(var c in e){if(eA(e,c)&&(!n||String(Number(c))!==c||!(c<e.length)))!(ea&&r["$"+c]instanceof Symbol)&&(Y.call(/[^\w$]/,c)?o.push(t(c,e)+": "+t(e[c],e)):o.push(c+": "+t(e[c],e)))}if("function"==typeof eo)for(var l=0;l<a.length;l++)ec.call(e,a[l])&&o.push("["+t(a[l])+"]: "+t(e[a[l]],e));return o}var eT=function(e,t,r){for(var n,o=e;null!=(n=o.next);o=n)if(n.key===t)return o.next=n.next,r||(n.next=e.next,e.next=n),n},ex=function(e,t){if(e){var r=eT(e,t);return r&&r.value}},ek=function(e,t,r){var n=eT(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}},eD=function(e,t){if(e)return eT(e,t,!0)},eC=Object,eR=Error,ez=EvalError,eM=RangeError,eL=ReferenceError,eN=SyntaxError,e$=URIError,eZ=Math.abs,eG=Math.floor,eU=Math.max,eq=Math.min,eB=Math.pow,eH=Math.round,eV=Number.isNaN||function(e){return e!=e},eW=Object.getOwnPropertyDescriptor;if(eW)try{eW([],"length")}catch(e){eW=null}var eQ=eW,eK=Object.defineProperty||!1;if(eK)try{eK({},"a",{value:1})}catch(e){eK=!1}var eJ=eK;function eY(){return p?f:(p=1,f="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null)}function eX(){return h?d:(h=1,d=eC.getPrototypeOf||null)}var e0=Object.prototype.toString,e1=Math.max,e2=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var o=0;o<t.length;o+=1)r[o+e.length]=t[o];return r},e9=function(e,t){for(var r=[],n=t||0,o=0;n<e.length;n+=1,o+=1)r[o]=e[n];return r},e3=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r},e5=Function.prototype.bind||function(e){var t,r=this;if("function"!=typeof r||"[object Function]"!==e0.apply(r))throw TypeError("Function.prototype.bind called on incompatible "+r);for(var n=e9(arguments,1),o=e1(0,r.length-n.length),i=[],a=0;a<o;a++)i[a]="$"+a;if(t=Function("binder","return function ("+e3(i,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof t){var o=r.apply(this,e2(n,arguments));return Object(o)===o?o:this}return r.apply(e,e2(n,arguments))}),r.prototype){var s=function(){};s.prototype=r.prototype,t.prototype=new s,s.prototype=null}return t},e6=Function.prototype.call;function e4(){return m?y:(m=1,y=Function.prototype.apply)}var e8="undefined"!=typeof Reflect&&Reflect&&Reflect.apply,e7=e4(),te=e8||e5.call(e6,e7),tt=function(e){if(e.length<1||"function"!=typeof e[0])throw new x("a function is required");return te(e5,e6,e)},tr=Function,tn=function(e){try{return tr('"use strict"; return ('+e+").constructor;")()}catch(e){}},to=function(){throw new x},ti=eQ?function(){try{return arguments.callee,to}catch(e){try{return eQ(arguments,"callee").get}catch(e){return to}}}():to,ta=(function(){if(u)return l;u=1;var e="undefined"!=typeof Symbol&&Symbol,t=c?s:(c=1,s=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var o=Object.getOwnPropertySymbols(e);if(1!==o.length||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0});return l=function(){return"function"==typeof e&&"function"==typeof Symbol&&"symbol"==typeof e("foo")&&"symbol"==typeof Symbol("bar")&&t()}})()(),ts=function(){if(w)return b;w=1;var e=eY(),t=eX(),r=function(){if(g)return v;g=1;try{e=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var e,t=!!e&&eQ&&eQ(Object.prototype,"__proto__"),r=Object,n=r.getPrototypeOf;return v=t&&"function"==typeof t.get?tt([t.get]):"function"==typeof n&&function(e){return n(null==e?e:r(e))}}();return b=e?function(t){return e(t)}:t?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw TypeError("getProto: not an object");return t(e)}:r?function(e){return r(e)}:null}(),tc=eX(),tl=eY(),tu=e4(),tf={},tp="undefined"!=typeof Uint8Array&&ts?ts(Uint8Array):E,td={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?E:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?E:ArrayBuffer,"%ArrayIteratorPrototype%":ta&&ts?ts([][Symbol.iterator]()):E,"%AsyncFromSyncIteratorPrototype%":E,"%AsyncFunction%":tf,"%AsyncGenerator%":tf,"%AsyncGeneratorFunction%":tf,"%AsyncIteratorPrototype%":tf,"%Atomics%":"undefined"==typeof Atomics?E:Atomics,"%BigInt%":"undefined"==typeof BigInt?E:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?E:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?E:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?E:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":eR,"%eval%":eval,"%EvalError%":ez,"%Float32Array%":"undefined"==typeof Float32Array?E:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?E:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?E:FinalizationRegistry,"%Function%":tr,"%GeneratorFunction%":tf,"%Int8Array%":"undefined"==typeof Int8Array?E:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?E:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?E:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ta&&ts?ts(ts([][Symbol.iterator]())):E,"%JSON%":"object"==typeof JSON?JSON:E,"%Map%":"undefined"==typeof Map?E:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&ta&&ts?ts(new Map()[Symbol.iterator]()):E,"%Math%":Math,"%Number%":Number,"%Object%":eC,"%Object.getOwnPropertyDescriptor%":eQ,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?E:Promise,"%Proxy%":"undefined"==typeof Proxy?E:Proxy,"%RangeError%":eM,"%ReferenceError%":eL,"%Reflect%":"undefined"==typeof Reflect?E:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?E:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&ta&&ts?ts(new Set()[Symbol.iterator]()):E,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?E:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ta&&ts?ts(""[Symbol.iterator]()):E,"%Symbol%":ta?Symbol:E,"%SyntaxError%":eN,"%ThrowTypeError%":ti,"%TypedArray%":tp,"%TypeError%":x,"%Uint8Array%":"undefined"==typeof Uint8Array?E:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?E:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?E:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?E:Uint32Array,"%URIError%":e$,"%WeakMap%":"undefined"==typeof WeakMap?E:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?E:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?E:WeakSet,"%Function.prototype.call%":e6,"%Function.prototype.apply%":tu,"%Object.defineProperty%":eJ,"%Object.getPrototypeOf%":tc,"%Math.abs%":eZ,"%Math.floor%":eG,"%Math.max%":eU,"%Math.min%":eq,"%Math.pow%":eB,"%Math.round%":eH,"%Math.sign%":function(e){return eV(e)||0===e?e:e<0?-1:1},"%Reflect.getPrototypeOf%":tl};if(ts)try{null.error}catch(e){var th=ts(ts(e));td["%Error.prototype%"]=th}var ty=function e(t){var r;if("%AsyncFunction%"===t)r=tn("async function () {}");else if("%GeneratorFunction%"===t)r=tn("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=tn("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&ts&&(r=ts(o.prototype))}return td[t]=r,r},tm={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},tv=function(){if(_)return A;_=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty;return A=e5.call(e,t)}(),tg=e5.call(e6,Array.prototype.concat),tb=e5.call(tu,Array.prototype.splice),tw=e5.call(e6,String.prototype.replace),tA=e5.call(e6,String.prototype.slice),t_=e5.call(e6,RegExp.prototype.exec),tE=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,tS=/\\(\\)?/g,tO=function(e){var t=tA(e,0,1),r=tA(e,-1);if("%"===t&&"%"!==r)throw new eN("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new eN("invalid intrinsic syntax, expected opening `%`");var n=[];return tw(e,tE,function(e,t,r,o){n[n.length]=r?tw(o,tS,"$1"):t||e}),n},tF=function(e,t){var r,n=e;if(tv(tm,n)&&(n="%"+(r=tm[n])[0]+"%"),tv(td,n)){var o=td[n];if(o===tf&&(o=ty(n)),void 0===o&&!t)throw new x("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new eN("intrinsic "+e+" does not exist!")},tj=function(e,t){if("string"!=typeof e||0===e.length)throw new x("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new x('"allowMissing" argument must be a boolean');if(null===t_(/^%?[^%]*%?$/,e))throw new eN("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=tO(e),n=r.length>0?r[0]:"",o=tF("%"+n+"%",t),i=o.name,a=o.value,s=!1,c=o.alias;c&&(n=c[0],tb(r,tg([0,1],c)));for(var l=1,u=!0;l<r.length;l+=1){var f=r[l],p=tA(f,0,1),d=tA(f,-1);if(('"'===p||"'"===p||"`"===p||'"'===d||"'"===d||"`"===d)&&p!==d)throw new eN("property names with quotes must have matching quotes");if("constructor"!==f&&u||(s=!0),n+="."+f,tv(td,i="%"+n+"%"))a=td[i];else if(null!=a){if(!(f in a)){if(!t)throw new x("base intrinsic for "+e+" exists, but the property is not available.");return}if(eQ&&l+1>=r.length){var h=eQ(a,f);a=(u=!!h)&&"get"in h&&!("originalValue"in h.get)?h.get:a[f]}else u=tv(a,f),a=a[f];u&&!s&&(td[i]=a)}}return a},tI=tt([tj("%String.prototype.indexOf%")]),tP=function(e,t){var r=tj(e,!!t);return"function"==typeof r&&tI(e,".prototype.")>-1?tt([r]):r},tT=tj("%Map%",!0),tx=tP("Map.prototype.get",!0),tk=tP("Map.prototype.set",!0),tD=tP("Map.prototype.has",!0),tC=tP("Map.prototype.delete",!0),tR=tP("Map.prototype.size",!0),tz=!!tT&&function(){var e,t={assert:function(e){if(!t.has(e))throw new x("Side channel does not contain "+ey(e))},delete:function(t){if(e){var r=tC(e,t);return 0===tR(e)&&(e=void 0),r}return!1},get:function(t){if(e)return tx(e,t)},has:function(t){return!!e&&tD(e,t)},set:function(t,r){e||(e=new tT),tk(e,t,r)}};return t},tM=tj("%WeakMap%",!0),tL=tP("WeakMap.prototype.get",!0),tN=tP("WeakMap.prototype.set",!0),t$=tP("WeakMap.prototype.has",!0),tZ=tP("WeakMap.prototype.delete",!0),tG=(tM?function(){var e,t,r={assert:function(e){if(!r.has(e))throw new x("Side channel does not contain "+ey(e))},delete:function(r){if(tM&&r&&("object"==typeof r||"function"==typeof r)){if(e)return tZ(e,r)}else if(tz&&t)return t.delete(r);return!1},get:function(r){return tM&&r&&("object"==typeof r||"function"==typeof r)&&e?tL(e,r):t&&t.get(r)},has:function(r){return tM&&r&&("object"==typeof r||"function"==typeof r)&&e?t$(e,r):!!t&&t.has(r)},set:function(r,n){tM&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new tM),tN(e,r,n)):tz&&(t||(t=tz()),t.set(r,n))}};return r}:tz)||tz||function(){var e,t={assert:function(e){if(!t.has(e))throw new x("Side channel does not contain "+ey(e))},delete:function(t){var r=e&&e.next,n=eD(e,t);return n&&r&&r===n&&(e=void 0),!!n},get:function(t){return ex(e,t)},has:function(t){var r;return!!(r=e)&&!!eT(r,t)},set:function(t,r){e||(e={next:void 0}),ek(e,t,r)}};return t},tU=String.prototype.replace,tq=/%20/g,tB="RFC3986",tH={default:tB,formatters:{RFC1738:function(e){return tU.call(e,tq,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738"},tV=Object.prototype.hasOwnProperty,tW=Array.isArray,tQ=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),tK=function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(tW(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);t.obj[t.prop]=n}}},tJ=function(e,t){for(var r=t&&t.plainObjects?{__proto__:null}:{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},tY={combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],i=o.obj[o.prop],a=Object.keys(i),s=0;s<a.length;++s){var c=a[s],l=i[c];"object"==typeof l&&null!==l&&-1===r.indexOf(l)&&(t.push({obj:i,prop:c}),r.push(l))}return tK(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r,n,o){if(0===e.length)return e;var i=e;if("symbol"==typeof e?i=Symbol.prototype.toString.call(e):"string"!=typeof e&&(i=String(e)),"iso-8859-1"===r)return escape(i).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var a="",s=0;s<i.length;s+=1024){for(var c=i.length>=1024?i.slice(s,s+1024):i,l=[],u=0;u<c.length;++u){var f=c.charCodeAt(u);if(45===f||46===f||95===f||126===f||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||o===tH.RFC1738&&(40===f||41===f)){l[l.length]=c.charAt(u);continue}if(f<128){l[l.length]=tQ[f];continue}if(f<2048){l[l.length]=tQ[192|f>>6]+tQ[128|63&f];continue}if(f<55296||f>=57344){l[l.length]=tQ[224|f>>12]+tQ[128|f>>6&63]+tQ[128|63&f];continue}u+=1,f=65536+((1023&f)<<10|1023&c.charCodeAt(u)),l[l.length]=tQ[240|f>>18]+tQ[128|f>>12&63]+tQ[128|f>>6&63]+tQ[128|63&f]}a+=l.join("")}return a},isBuffer:function(e){return!!e&&"object"==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(tW(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r&&"function"!=typeof r){if(tW(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!tV.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var o=t;return(tW(t)&&!tW(r)&&(o=tJ(t,n)),tW(t)&&tW(r))?(r.forEach(function(r,o){if(tV.call(t,o)){var i=t[o];i&&"object"==typeof i&&r&&"object"==typeof r?t[o]=e(i,r,n):t.push(r)}else t[o]=r}),t):Object.keys(r).reduce(function(t,o){var i=r[o];return tV.call(t,o)?t[o]=e(t[o],i,n):t[o]=i,t},o)}},tX=function(){var e,t={assert:function(e){if(!t.has(e))throw new x("Side channel does not contain "+ey(e))},delete:function(t){return!!e&&e.delete(t)},get:function(t){return e&&e.get(t)},has:function(t){return!!e&&e.has(t)},set:function(t,r){e||(e=tG()),e.set(t,r)}};return t},t0=Object.prototype.hasOwnProperty,t1={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},t2=Array.isArray,t9=Array.prototype.push,t3=function(e,t){t9.apply(e,t2(t)?t:[t])},t5=Date.prototype.toISOString,t6=tH.default,t4={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:tY.encode,encodeValuesOnly:!1,filter:void 0,format:t6,formatter:tH.formatters[t6],indices:!1,serializeDate:function(e){return t5.call(e)},skipNulls:!1,strictNullHandling:!1},t8={},t7=function e(t,r,n,o,i,a,s,c,l,u,f,p,d,h,y,m,v,g){for(var b,w,A=t,_=g,E=0,S=!1;void 0!==(_=_.get(t8))&&!S;){var O=_.get(t);if(E+=1,void 0!==O){if(O===E)throw RangeError("Cyclic object value");S=!0}void 0===_.get(t8)&&(E=0)}if("function"==typeof u?A=u(r,A):A instanceof Date?A=d(A):"comma"===n&&t2(A)&&(A=tY.maybeMap(A,function(e){return e instanceof Date?d(e):e})),null===A){if(a)return l&&!m?l(r,t4.encoder,v,"key",h):r;A=""}if("string"==typeof(b=A)||"number"==typeof b||"boolean"==typeof b||"symbol"==typeof b||"bigint"==typeof b||tY.isBuffer(A))return l?[y(m?r:l(r,t4.encoder,v,"key",h))+"="+y(l(A,t4.encoder,v,"value",h))]:[y(r)+"="+y(String(A))];var F=[];if(void 0===A)return F;if("comma"===n&&t2(A))m&&l&&(A=tY.maybeMap(A,l)),w=[{value:A.length>0?A.join(",")||null:void 0}];else if(t2(u))w=u;else{var j=Object.keys(A);w=f?j.sort(f):j}var I=c?String(r).replace(/\./g,"%2E"):String(r),P=o&&t2(A)&&1===A.length?I+"[]":I;if(i&&t2(A)&&0===A.length)return P+"[]";for(var T=0;T<w.length;++T){var x=w[T],k="object"==typeof x&&x&&void 0!==x.value?x.value:A[x];if(!s||null!==k){var D=p&&c?String(x).replace(/\./g,"%2E"):String(x),C=t2(A)?"function"==typeof n?n(P,D):P:P+(p?"."+D:"["+D+"]");g.set(t,E);var R=tX();R.set(t8,g),t3(F,e(k,C,n,o,i,a,s,c,"comma"===n&&m&&t2(A)?null:l,u,f,p,d,h,y,m,v,R))}}return F},re=function(e){if(!e)return t4;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw TypeError("Encoder has to be a function.");var t,r=e.charset||t4.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=tH.default;if(void 0!==e.format){if(!t0.call(tH.formatters,e.format))throw TypeError("Unknown format option provided.");n=e.format}var o=tH.formatters[n],i=t4.filter;if(("function"==typeof e.filter||t2(e.filter))&&(i=e.filter),t=e.arrayFormat in t1?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":t4.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");var a=void 0===e.allowDots?!0===e.encodeDotInKeys||t4.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:t4.addQueryPrefix,allowDots:a,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:t4.allowEmptyArrays,arrayFormat:t,charset:r,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:t4.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?t4.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:t4.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:t4.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:t4.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:t4.encodeValuesOnly,filter:i,format:n,formatter:o,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:t4.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:t4.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:t4.strictNullHandling}},rt=Object.prototype.hasOwnProperty,rr=Array.isArray,rn={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:tY.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},ro=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},ri=function(e,t){var r={__proto__:null},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;n=n.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var o=t.parameterLimit===1/0?void 0:t.parameterLimit,i=n.split(t.delimiter,o),a=-1,s=t.charset;if(t.charsetSentinel)for(c=0;c<i.length;++c)0===i[c].indexOf("utf8=")&&("utf8=%E2%9C%93"===i[c]?s="utf-8":"utf8=%26%2310003%3B"===i[c]&&(s="iso-8859-1"),a=c,c=i.length);for(c=0;c<i.length;++c)if(c!==a){var c,l,u,f=i[c],p=f.indexOf("]="),d=-1===p?f.indexOf("="):p+1;-1===d?(l=t.decoder(f,rn.decoder,s,"key"),u=t.strictNullHandling?null:""):(l=t.decoder(f.slice(0,d),rn.decoder,s,"key"),u=tY.maybeMap(ro(f.slice(d+1),t),function(e){return t.decoder(e,rn.decoder,s,"value")})),u&&t.interpretNumericEntities&&"iso-8859-1"===s&&(u=String(u).replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})),f.indexOf("[]=")>-1&&(u=rr(u)?[u]:u);var h=rt.call(r,l);h&&"combine"===t.duplicates?r[l]=tY.combine(r[l],u):h&&"last"!==t.duplicates||(r[l]=u)}return r},ra=function(e,t,r,n){for(var o=n?t:ro(t,r),i=e.length-1;i>=0;--i){var a,s=e[i];if("[]"===s&&r.parseArrays)a=r.allowEmptyArrays&&(""===o||r.strictNullHandling&&null===o)?[]:[].concat(o);else{a=r.plainObjects?{__proto__:null}:{};var c="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,l=r.decodeDotInKeys?c.replace(/%2E/g,"."):c,u=parseInt(l,10);r.parseArrays||""!==l?!isNaN(u)&&s!==l&&String(u)===l&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(a=[])[u]=o:"__proto__"!==l&&(a[l]=o):a={0:o}}o=a}return o},rs=function(e,t,r,n){if(e){var o=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(o),s=a?o.slice(0,a.index):o,c=[];if(s){if(!r.plainObjects&&rt.call(Object.prototype,s)&&!r.allowPrototypes)return;c.push(s)}for(var l=0;r.depth>0&&null!==(a=i.exec(o))&&l<r.depth;){if(l+=1,!r.plainObjects&&rt.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(a[1])}if(a){if(!0===r.strictDepth)throw RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");c.push("["+o.slice(a.index)+"]")}return ra(c,t,r,n)}},rc=function(e){if(!e)return rn;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.decodeDotInKeys&&"boolean"!=typeof e.decodeDotInKeys)throw TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?rn.charset:e.charset,r=void 0===e.duplicates?rn.duplicates:e.duplicates;if("combine"!==r&&"first"!==r&&"last"!==r)throw TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===e.allowDots?!0===e.decodeDotInKeys||rn.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:rn.allowEmptyArrays,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:rn.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:rn.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:rn.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:rn.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:rn.comma,decodeDotInKeys:"boolean"==typeof e.decodeDotInKeys?e.decodeDotInKeys:rn.decodeDotInKeys,decoder:"function"==typeof e.decoder?e.decoder:rn.decoder,delimiter:"string"==typeof e.delimiter||tY.isRegExp(e.delimiter)?e.delimiter:rn.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:rn.depth,duplicates:r,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:rn.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:rn.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:rn.plainObjects,strictDepth:"boolean"==typeof e.strictDepth?!!e.strictDepth:rn.strictDepth,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:rn.strictNullHandling}};function rl(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var ru=/^([a-z0-9.+-]+:)/i,rf=/:[0-9]*$/,rp=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,rd=["'"].concat(["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","	"])),rh=["%","/","?",";","#"].concat(rd),ry=["/","?","#"],rm=/^[+a-z0-9A-Z_-]{0,63}$/,rv=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,rg={javascript:!0,"javascript:":!0},rb={javascript:!0,"javascript:":!0},rw={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},rA={parse:function(e,t){var r=rc(t);if(""===e||null==e)return r.plainObjects?{__proto__:null}:{};for(var n="string"==typeof e?ri(e,r):e,o=r.plainObjects?{__proto__:null}:{},i=Object.keys(n),a=0;a<i.length;++a){var s=i[a],c=rs(s,n[s],r,"string"==typeof e);o=tY.merge(o,c,r)}return!0===r.allowSparse?o:tY.compact(o)},stringify:function(e,t){var r,n,o=e,i=re(t);"function"==typeof i.filter?o=(0,i.filter)("",o):t2(i.filter)&&(r=i.filter);var a=[];if("object"!=typeof o||null===o)return"";var s=t1[i.arrayFormat],c="comma"===s&&i.commaRoundTrip;r||(r=Object.keys(o)),i.sort&&r.sort(i.sort);for(var l=tX(),u=0;u<r.length;++u){var f=r[u],p=o[f];(!i.skipNulls||null!==p)&&t3(a,t7(p,f,s,c,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,l))}var d=a.join(i.delimiter),h=!0===i.addQueryPrefix?"?":"";return i.charsetSentinel&&("iso-8859-1"===i.charset?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),d.length>0?h+d:""}};function r_(e,t,r){if(e&&"object"==typeof e&&e instanceof rl)return e;var n=new rl;return n.parse(e,t,r),n}rl.prototype.parse=function(e,t,r){if("string"!=typeof e)throw TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),o=-1!==n&&n<e.indexOf("#")?"?":"#",i=e.split(o);i[0]=i[0].replace(/\\/g,"/");var a=e=i.join(o);if(a=a.trim(),!r&&1===e.split("#").length){var s=rp.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],t?this.query=rA.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var c=ru.exec(a);if(c){var l=(c=c[0]).toLowerCase();this.protocol=l,a=a.substr(c.length)}if(r||c||a.match(/^\/\/[^@/]+@[^@/]+/)){var u="//"===a.substr(0,2);u&&!(c&&rb[c])&&(a=a.substr(2),this.slashes=!0)}if(!rb[c]&&(u||c&&!rw[c])){for(var f,p,d=-1,h=0;h<ry.length;h++){var y=a.indexOf(ry[h]);-1!==y&&(-1===d||y<d)&&(d=y)}-1!==(p=-1===d?a.lastIndexOf("@"):a.lastIndexOf("@",d))&&(f=a.slice(0,p),a=a.slice(p+1),this.auth=decodeURIComponent(f)),d=-1;for(var h=0;h<rh.length;h++){var y=a.indexOf(rh[h]);-1!==y&&(-1===d||y<d)&&(d=y)}-1===d&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var v=this.hostname.split(/\./),h=0,g=v.length;h<g;h++){var b=v[h];if(b&&!b.match(rm)){for(var w="",A=0,_=b.length;A<_;A++)b.charCodeAt(A)>127?w+="x":w+=b[A];if(!w.match(rm)){var E=v.slice(0,h),S=v.slice(h+1),O=b.match(rv);O&&(E.push(O[1]),S.unshift(O[2])),S.length&&(a="/"+S.join(".")+a),this.hostname=E.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),m||(this.hostname=T.toASCII(this.hostname));var F=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+F,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!rg[l])for(var h=0,g=rd.length;h<g;h++){var I=rd[h];if(-1!==a.indexOf(I)){var P=encodeURIComponent(I);P===I&&(P=escape(I)),a=a.split(I).join(P)}}var x=a.indexOf("#");-1!==x&&(this.hash=a.substr(x),a=a.slice(0,x));var k=a.indexOf("?");if(-1!==k?(this.search=a.substr(k),this.query=a.substr(k+1),t&&(this.query=rA.parse(this.query)),a=a.slice(0,k)):t&&(this.search="",this.query={}),a&&(this.pathname=a),rw[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",D=this.search||"";this.path=F+D}return this.href=this.format(),this},rl.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":")+"@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(i=rA.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||rw[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),t+o+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(a=a.replace("#","%23"))+n},rl.prototype.resolve=function(e){return this.resolveObject(r_(e,!1,!0)).format()},rl.prototype.resolveObject=function(e){if("string"==typeof e){var t=new rl;t.parse(e,!1,!0),e=t}for(var r=new rl,n=Object.keys(this),o=0;o<n.length;o++){var i=n[o];r[i]=this[i]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),s=0;s<a.length;s++){var c=a[s];"protocol"!==c&&(r[c]=e[c])}return rw[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!rw[e.protocol]){for(var l=Object.keys(e),u=0;u<l.length;u++){var f=l[u];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||rb[e.protocol])r.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var d=r.pathname||"",h=r.search||"";r.path=d+h}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var y=r.pathname&&"/"===r.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),v=m||y||r.host&&e.pathname,g=v,b=r.pathname&&r.pathname.split("/")||[],p=e.pathname&&e.pathname.split("/")||[],w=r.protocol&&!rw[r.protocol];if(w&&(r.hostname="",r.port=null,r.host&&(""===b[0]?b[0]=r.host:b.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),v=v&&(""===p[0]||""===b[0])),m)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,b=p;else if(p.length)b||(b=[]),b.pop(),b=b.concat(p),r.search=e.search,r.query=e.query;else if(null!=e.search){if(w){r.host=b.shift(),r.hostname=r.host;var A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");A&&(r.auth=A.shift(),r.hostname=A.shift(),r.host=r.hostname)}return r.search=e.search,r.query=e.query,(null!==r.pathname||null!==r.search)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!b.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var _=b.slice(-1)[0],E=(r.host||e.host||b.length>1)&&("."===_||".."===_)||""===_,S=0,O=b.length;O>=0;O--)"."===(_=b[O])?b.splice(O,1):".."===_?(b.splice(O,1),S++):S&&(b.splice(O,1),S--);if(!v&&!g)for(;S--;S)b.unshift("..");v&&""!==b[0]&&(!b[0]||"/"!==b[0].charAt(0))&&b.unshift(""),E&&"/"!==b.join("/").substr(-1)&&b.push("");var F=""===b[0]||b[0]&&"/"===b[0].charAt(0);if(w){r.hostname=F?"":b.length?b.shift():"",r.host=r.hostname;var A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");A&&(r.auth=A.shift(),r.hostname=A.shift(),r.host=r.hostname)}return(v=v||r.host&&b.length)&&!F&&b.unshift(""),b.length>0?r.pathname=b.join("/"):(r.pathname=null,r.path=null),(null!==r.pathname||null!==r.search)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},rl.prototype.parseHost=function(){var e=this.host,t=rf.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},I.parse=r_,I.resolve=function(e,t){return r_(e,!1,!0).resolve(t)},I.resolveObject=function(e,t){return e?r_(e,!1,!0).resolveObject(t):t},I.format=function(e){return("string"==typeof e&&(e=r_(e)),e instanceof rl)?e.format():rl.prototype.format.call(e)},I.Url=rl;var rE={},rS=rE.ValidationError=function(e,t,r,n,o,i){if(Array.isArray(n)?(this.path=n,this.property=n.reduce(function(e,t){return e+rx(t)},"instance")):void 0!==n&&(this.property=n),e&&(this.message=e),r){var a=r.$id||r.id;this.schema=a||r}void 0!==t&&(this.instance=t),this.name=o,this.argument=i,this.stack=this.toString()};rS.prototype.toString=function(){return this.property+" "+this.message};var rO=rE.ValidatorResult=function(e,t,r,n){this.instance=e,this.schema=t,this.options=r,this.path=n.path,this.propertyPath=n.propertyPath,this.errors=[],this.throwError=r&&r.throwError,this.throwFirst=r&&r.throwFirst,this.throwAll=r&&r.throwAll,this.disableFormat=r&&!0===r.disableFormat};function rF(e,t){return t+": "+e.toString()+"\n"}function rj(e){Error.captureStackTrace&&Error.captureStackTrace(this,rj),this.instance=e.instance,this.schema=e.schema,this.options=e.options,this.errors=e.errors}rO.prototype.addError=function(e){var t;if("string"==typeof e)t=new rS(e,this.instance,this.schema,this.path);else{if(!e)throw Error("Missing error detail");if(!e.message)throw Error("Missing error message");if(!e.name)throw Error("Missing validator type");t=new rS(e.message,this.instance,this.schema,this.path,e.name,e.argument)}if(this.errors.push(t),this.throwFirst)throw new rj(this);if(this.throwError)throw t;return t},rO.prototype.importErrors=function(e){"string"==typeof e||e&&e.validatorType?this.addError(e):e&&e.errors&&(this.errors=this.errors.concat(e.errors))},rO.prototype.toString=function(e){return this.errors.map(rF).join("")},Object.defineProperty(rO.prototype,"valid",{get:function(){return!this.errors.length}}),rE.ValidatorResultError=rj,rj.prototype=Error(),rj.prototype.constructor=rj,rj.prototype.name="Validation Error";var rI=rE.SchemaError=function e(t,r){this.message=t,this.schema=r,Error.call(this,t),Error.captureStackTrace(this,e)};rI.prototype=Object.create(Error.prototype,{constructor:{value:rI,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var rP=rE.SchemaContext=function(e,t,r,n,o){this.schema=e,this.options=t,Array.isArray(r)?(this.path=r,this.propertyPath=r.reduce(function(e,t){return e+rx(t)},"instance")):this.propertyPath=r,this.base=n,this.schemas=o};rP.prototype.resolve=function(e){return I.resolve(this.base,e)},rP.prototype.makeChild=function(e,t){var r=void 0===t?this.path:this.path.concat([t]),n=e.$id||e.id,o=I.resolve(this.base,n||""),i=new rP(e,this.options,r,o,Object.create(this.schemas));return n&&!i.schemas[o]&&(i.schemas[o]=e),i};var rT=rE.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,duration:/P(T\d+(H(\d+M(\d+S)?)?|M(\d+S)?|S)|\d+(D|M(\d+D)?|Y(\d+M(\d+D)?)?)(T\d+(H(\d+M(\d+S)?)?|M(\d+S)?|S))?|\d+W)/i,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"idn-email":/^("(?:[!#-\[\]-\u{10FFFF}]|\\[\t -\u{10FFFF}])*"|[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}](?:\.?[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}])*)@([!#-'*+\-/-9=?A-Z\^-\u{10FFFF}](?:\.?[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}])*|\[[!-Z\^-\u{10FFFF}]*\])$/u,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+.-]*:[^\s]*$/,"uri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/,iri:/^[a-zA-Z][a-zA-Z0-9+.-]*:[^\s]*$/,"iri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\u{10FFFF}]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~-\u{10FFFF}]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~-\u{10FFFF}])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\u{10FFFF}]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/u,uuid:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,"uri-template":/(%[0-9a-f]{2}|[!#$&(-;=?@\[\]_a-z~]|\{[!#&+,./;=?@|]?(%[0-9a-f]{2}|[0-9_a-z])(\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\d{0,3}|\*)?(,(%[0-9a-f]{2}|[0-9_a-z])(\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\d{0,3}|\*)?)*\})*/iu,"json-pointer":/^(\/([\x00-\x2e0-@\[-}\x7f]|~[01])*)*$/iu,"relative-json-pointer":/^\d+(#|(\/([\x00-\x2e0-@\[-}\x7f]|~[01])*)*)$/iu,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"utc-millisec":function(e){return"string"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},regex:function(e){var t=!0;try{new RegExp(e)}catch(e){t=!1}return t},style:/[\r\n\t ]*[^\r\n\t ][^:]*:[\r\n\t ]*[^\r\n\t ;]*[\r\n\t ]*;?/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/};rT.regexp=rT.regex,rT.pattern=rT.regex,rT.ipv4=rT["ip-address"],rE.isFormat=function(e,t,r){if("string"==typeof e&&void 0!==rT[t]){if(rT[t]instanceof RegExp)return rT[t].test(e);if("function"==typeof rT[t])return rT[t](e)}else if(r&&r.customFormats&&"function"==typeof r.customFormats[t])return r.customFormats[t](e);return!0};var rx=rE.makeSuffix=function(e){return(e=e.toString()).match(/[.\s\[\]]/)||e.match(/^[\d]/)?e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]":"."+e};function rk(e,t,r,n){"object"==typeof r?t[n]=rR(e[n],r):-1===e.indexOf(r)&&t.push(r)}function rD(e,t,r){t[r]=e[r]}function rC(e,t,r,n){"object"==typeof t[n]&&t[n]&&e[n]?r[n]=rR(e[n],t[n]):r[n]=t[n]}function rR(e,t){var r=Array.isArray(t),n=r&&[]||{};return r?(e=e||[],n=n.concat(e),t.forEach(rk.bind(null,e,n))):(e&&"object"==typeof e&&Object.keys(e).forEach(rD.bind(null,e,n)),Object.keys(t).forEach(rC.bind(null,e,t,n))),n}function rz(e){return"/"+encodeURIComponent(e).replace(/~/g,"%7E")}rE.deepCompareStrict=function e(t,r){if(typeof t!=typeof r)return!1;if(Array.isArray(t))return!!Array.isArray(r)&&t.length===r.length&&t.every(function(n,o){return e(t[o],r[o])});if("object"==typeof t){if(!t||!r)return t===r;var n=Object.keys(t),o=Object.keys(r);return n.length===o.length&&n.every(function(n){return e(t[n],r[n])})}return t===r},rE.deepMerge=rR,rE.objectGetPath=function(e,t){for(var r,n=t.split("/").slice(1);"string"==typeof(r=n.shift());){var o=decodeURIComponent(r.replace(/~0/,"~").replace(/~1/g,"/"));if(!(o in e))return;e=e[o]}return e},rE.encodePath=function(e){return e.map(rz).join("")},rE.getDecimalPlaces=function(e){var t=0;if(isNaN(e))return t;"number"!=typeof e&&(e=Number(e));var r=e.toString().split("e");if(2===r.length){if("-"!==r[1][0])return t;t=Number(r[1].slice(1))}var n=r[0].split(".");return 2===n.length&&(t+=n[1].length),t},rE.isSchema=function(e){return"object"==typeof e&&e||"boolean"==typeof e};var rM=rE.ValidatorResult,rL=rE.SchemaError,rN={};rN.ignoreProperties={id:!0,default:!0,description:!0,title:!0,additionalItems:!0,then:!0,else:!0,$schema:!0,$ref:!0,extends:!0};var r$=rN.validators={};function rZ(e,t,r,n,o){var i=t.throwError,a=t.throwAll;t.throwError=!1,t.throwAll=!1;var s=this.validateSchema(e,o,t,r);return t.throwError=i,t.throwAll=a,!s.valid&&n instanceof Function&&n(s),s.valid}function rG(e,t){if(Object.hasOwnProperty.call(e,t))return e[t];if(t in e){for(;e=Object.getPrototypeOf(e);)if(Object.propertyIsEnumerable.call(e,t))return e[t]}}function rU(e,t,r,n,o,i){if(this.types.object(e)&&(!t.properties||void 0===t.properties[o])){if(!1===t.additionalProperties)i.addError({name:"additionalProperties",argument:o,message:"is not allowed to have the additional property "+JSON.stringify(o)});else{var a=t.additionalProperties||{};"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,o,a,r,n);var s=this.validateSchema(e[o],a,r,n.makeChild(a,o));s.instance!==i.instance[o]&&(i.instance[o]=s.instance),i.importErrors(s)}}}r$.type=function(e,t,r,n){if(void 0===e)return null;var o=new rM(e,t,r,n),i=Array.isArray(t.type)?t.type:[t.type];if(!i.some(this.testType.bind(this,e,t,r,n))){var a=i.map(function(e){if(e){var t=e.$id||e.id;return t?"<"+t+">":e+""}});o.addError({name:"type",argument:a,message:"is not of a type(s) "+a})}return o},r$.anyOf=function(e,t,r,n){if(void 0===e)return null;var o=new rM(e,t,r,n),i=new rM(e,t,r,n);if(!Array.isArray(t.anyOf))throw new rL("anyOf must be an array");if(!t.anyOf.some(rZ.bind(this,e,r,n,function(e){i.importErrors(e)}))){var a=t.anyOf.map(function(e,t){var r=e.$id||e.id;return r?"<"+r+">":e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"});r.nestedErrors&&o.importErrors(i),o.addError({name:"anyOf",argument:a,message:"is not any of "+a.join(",")})}return o},r$.allOf=function(e,t,r,n){if(void 0===e)return null;if(!Array.isArray(t.allOf))throw new rL("allOf must be an array");var o=new rM(e,t,r,n),i=this;return t.allOf.forEach(function(t,a){var s=i.validateSchema(e,t,r,n);if(!s.valid){var c=t.$id||t.id||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+a+"]";o.addError({name:"allOf",argument:{id:c,length:s.errors.length,valid:s},message:"does not match allOf schema "+c+" with "+s.errors.length+" error[s]:"}),o.importErrors(s)}}),o},r$.oneOf=function(e,t,r,n){if(void 0===e)return null;if(!Array.isArray(t.oneOf))throw new rL("oneOf must be an array");var o=new rM(e,t,r,n),i=new rM(e,t,r,n),a=t.oneOf.filter(rZ.bind(this,e,r,n,function(e){i.importErrors(e)})).length,s=t.oneOf.map(function(e,t){return e.$id||e.id||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"});return 1!==a&&(r.nestedErrors&&o.importErrors(i),o.addError({name:"oneOf",argument:s,message:"is not exactly one from "+s.join(",")})),o},r$.if=function(e,t,r,n){if(void 0===e)return null;if(!rE.isSchema(t.if))throw Error('Expected "if" keyword to be a schema');var o,i=rZ.call(this,e,r,n,null,t.if),a=new rM(e,t,r,n);if(i){if(void 0===t.then)return;if(!rE.isSchema(t.then))throw Error('Expected "then" keyword to be a schema');o=this.validateSchema(e,t.then,r,n.makeChild(t.then)),a.importErrors(o)}else{if(void 0===t.else)return;if(!rE.isSchema(t.else))throw Error('Expected "else" keyword to be a schema');o=this.validateSchema(e,t.else,r,n.makeChild(t.else)),a.importErrors(o)}return a},r$.propertyNames=function(e,t,r,n){if(this.types.object(e)){var o=new rM(e,t,r,n),i=void 0!==t.propertyNames?t.propertyNames:{};if(!rE.isSchema(i))throw new rL('Expected "propertyNames" to be a schema (object or boolean)');for(var a in e)if(void 0!==rG(e,a)){var s=this.validateSchema(a,i,r,n.makeChild(i));o.importErrors(s)}return o}},r$.properties=function(e,t,r,n){if(this.types.object(e)){var o=new rM(e,t,r,n),i=t.properties||{};for(var a in i){var s=i[a];if(void 0!==s){if(null===s)throw new rL('Unexpected null, expected schema in "properties"');"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,a,s,r,n);var c=rG(e,a),l=this.validateSchema(c,s,r,n.makeChild(s,a));l.instance!==o.instance[a]&&(o.instance[a]=l.instance),o.importErrors(l)}}return o}},r$.patternProperties=function(e,t,r,n){if(this.types.object(e)){var o=new rM(e,t,r,n),i=t.patternProperties||{};for(var a in e){var s=!0;for(var c in i){var l=i[c];if(void 0!==l){if(null===l)throw new rL('Unexpected null, expected schema in "patternProperties"');try{var u=RegExp(c,"u")}catch(e){u=new RegExp(c)}if(u.test(a)){s=!1,"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,a,l,r,n);var f=this.validateSchema(e[a],l,r,n.makeChild(l,a));f.instance!==o.instance[a]&&(o.instance[a]=f.instance),o.importErrors(f)}}}s&&rU.call(this,e,t,r,n,a,o)}return o}},r$.additionalProperties=function(e,t,r,n){if(this.types.object(e)){if(t.patternProperties)return null;var o=new rM(e,t,r,n);for(var i in e)rU.call(this,e,t,r,n,i,o);return o}},r$.minProperties=function(e,t,r,n){if(this.types.object(e)){var o=new rM(e,t,r,n);return Object.keys(e).length>=t.minProperties||o.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),o}},r$.maxProperties=function(e,t,r,n){if(this.types.object(e)){var o=new rM(e,t,r,n);return Object.keys(e).length<=t.maxProperties||o.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),o}},r$.items=function(e,t,r,n){var o=this;if(this.types.array(e)&&void 0!==t.items){var i=new rM(e,t,r,n);return e.every(function(e,a){if(Array.isArray(t.items))var s=void 0===t.items[a]?t.additionalItems:t.items[a];else var s=t.items;if(void 0===s)return!0;if(!1===s)return i.addError({name:"items",message:"additionalItems not permitted"}),!1;var c=o.validateSchema(e,s,r,n.makeChild(s,a));return c.instance!==i.instance[a]&&(i.instance[a]=c.instance),i.importErrors(c),!0}),i}},r$.contains=function(e,t,r,n){var o=this;if(this.types.array(e)&&void 0!==t.contains){if(!rE.isSchema(t.contains))throw Error('Expected "contains" keyword to be a schema');var i=new rM(e,t,r,n);return!1===e.some(function(e,i){return 0===o.validateSchema(e,t.contains,r,n.makeChild(t.contains,i)).errors.length})&&i.addError({name:"contains",argument:t.contains,message:"must contain an item matching given schema"}),i}},r$.minimum=function(e,t,r,n){if(this.types.number(e)){var o=new rM(e,t,r,n);return t.exclusiveMinimum&&!0===t.exclusiveMinimum?e>t.minimum||o.addError({name:"minimum",argument:t.minimum,message:"must be greater than "+t.minimum}):e>=t.minimum||o.addError({name:"minimum",argument:t.minimum,message:"must be greater than or equal to "+t.minimum}),o}},r$.maximum=function(e,t,r,n){if(this.types.number(e)){var o=new rM(e,t,r,n);return t.exclusiveMaximum&&!0===t.exclusiveMaximum?e<t.maximum||o.addError({name:"maximum",argument:t.maximum,message:"must be less than "+t.maximum}):e<=t.maximum||o.addError({name:"maximum",argument:t.maximum,message:"must be less than or equal to "+t.maximum}),o}},r$.exclusiveMinimum=function(e,t,r,n){if("boolean"!=typeof t.exclusiveMinimum&&this.types.number(e)){var o=new rM(e,t,r,n);return e>t.exclusiveMinimum||o.addError({name:"exclusiveMinimum",argument:t.exclusiveMinimum,message:"must be strictly greater than "+t.exclusiveMinimum}),o}},r$.exclusiveMaximum=function(e,t,r,n){if("boolean"!=typeof t.exclusiveMaximum&&this.types.number(e)){var o=new rM(e,t,r,n);return e<t.exclusiveMaximum||o.addError({name:"exclusiveMaximum",argument:t.exclusiveMaximum,message:"must be strictly less than "+t.exclusiveMaximum}),o}};var rq=function(e,t,r,n,o,i){if(this.types.number(e)){var a=t[o];if(0==a)throw new rL(o+" cannot be zero");var s=new rM(e,t,r,n),c=Math.pow(10,Math.max(rE.getDecimalPlaces(e),rE.getDecimalPlaces(a)));return Math.round(e*c)%Math.round(a*c)!=0&&s.addError({name:o,argument:a,message:i+JSON.stringify(a)}),s}};function rB(e,t,r){var n,o=r.length;for(n=t+1;n<o;n++)if(rE.deepCompareStrict(e,r[n]))return!1;return!0}r$.multipleOf=function(e,t,r,n){return rq.call(this,e,t,r,n,"multipleOf","is not a multiple of (divisible by) ")},r$.divisibleBy=function(e,t,r,n){return rq.call(this,e,t,r,n,"divisibleBy","is not divisible by (multiple of) ")},r$.required=function(e,t,r,n){var o=new rM(e,t,r,n);return void 0===e&&!0===t.required?o.addError({name:"required",message:"is required"}):this.types.object(e)&&Array.isArray(t.required)&&t.required.forEach(function(t){void 0===rG(e,t)&&o.addError({name:"required",argument:t,message:"requires property "+JSON.stringify(t)})}),o},r$.pattern=function(e,t,r,n){if(this.types.string(e)){var o=new rM(e,t,r,n),i=t.pattern;try{var a=RegExp(i,"u")}catch(e){a=new RegExp(i)}return e.match(a)||o.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern.toString())}),o}},r$.format=function(e,t,r,n){if(void 0!==e){var o=new rM(e,t,r,n);return o.disableFormat||rE.isFormat(e,t.format,this)||o.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),o}},r$.minLength=function(e,t,r,n){if(this.types.string(e)){var o=new rM(e,t,r,n),i=e.match(/[\uDC00-\uDFFF]/g);return e.length-(i?i.length:0)>=t.minLength||o.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),o}},r$.maxLength=function(e,t,r,n){if(this.types.string(e)){var o=new rM(e,t,r,n),i=e.match(/[\uDC00-\uDFFF]/g);return e.length-(i?i.length:0)<=t.maxLength||o.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),o}},r$.minItems=function(e,t,r,n){if(this.types.array(e)){var o=new rM(e,t,r,n);return e.length>=t.minItems||o.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),o}},r$.maxItems=function(e,t,r,n){if(this.types.array(e)){var o=new rM(e,t,r,n);return e.length<=t.maxItems||o.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),o}},r$.uniqueItems=function(e,t,r,n){if(!0===t.uniqueItems&&this.types.array(e)){var o=new rM(e,t,r,n);return e.every(rB)||o.addError({name:"uniqueItems",message:"contains duplicate item"}),o}},r$.dependencies=function(e,t,r,n){if(this.types.object(e)){var o=new rM(e,t,r,n);for(var i in t.dependencies)if(void 0!==e[i]){var a=t.dependencies[i],s=n.makeChild(a,i);if("string"==typeof a&&(a=[a]),Array.isArray(a))a.forEach(function(t){void 0===e[t]&&o.addError({name:"dependencies",argument:s.propertyPath,message:"property "+t+" not found, required by "+s.propertyPath})});else{var c=this.validateSchema(e,a,r,s);o.instance!==c.instance&&(o.instance=c.instance),c&&c.errors.length&&(o.addError({name:"dependencies",argument:s.propertyPath,message:"does not meet dependency required by "+s.propertyPath}),o.importErrors(c))}}return o}},r$.enum=function(e,t,r,n){if(void 0===e)return null;if(!Array.isArray(t.enum))throw new rL("enum expects an array",t);var o=new rM(e,t,r,n);return t.enum.some(rE.deepCompareStrict.bind(null,e))||o.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.map(String).join(",")}),o},r$.const=function(e,t,r,n){if(void 0===e)return null;var o=new rM(e,t,r,n);return rE.deepCompareStrict(t.const,e)||o.addError({name:"const",argument:t.const,message:"does not exactly match expected constant: "+t.const}),o},r$.not=r$.disallow=function(e,t,r,n){var o=this;if(void 0===e)return null;var i=new rM(e,t,r,n),a=t.not||t.disallow;return a?(Array.isArray(a)||(a=[a]),a.forEach(function(a){if(o.testType(e,t,r,n,a)){var s=a&&(a.$id||a.id)||a;i.addError({name:"not",argument:s,message:"is of prohibited type "+s})}}),i):null};var rH={};function rV(e,t){this.id=e,this.ref=t}rH.SchemaScanResult=rV,rH.scan=function(e,t){function r(e,t){if(t&&"object"==typeof t){if(t.$ref){var s=I.resolve(e,t.$ref);a[s]=a[s]?a[s]+1:0;return}var c=t.$id||t.id,l=c?I.resolve(e,c):e;if(l){if(0>l.indexOf("#")&&(l+="#"),i[l]){if(!rE.deepCompareStrict(i[l],t))throw Error("Schema <"+l+"> already exists with different definition");return i[l]}i[l]=t,"#"==l[l.length-1]&&(i[l.substring(0,l.length-1)]=t)}n(l+"/items",Array.isArray(t.items)?t.items:[t.items]),n(l+"/extends",Array.isArray(t.extends)?t.extends:[t.extends]),r(l+"/additionalItems",t.additionalItems),o(l+"/properties",t.properties),r(l+"/additionalProperties",t.additionalProperties),o(l+"/definitions",t.definitions),o(l+"/patternProperties",t.patternProperties),o(l+"/dependencies",t.dependencies),n(l+"/disallow",t.disallow),n(l+"/allOf",t.allOf),n(l+"/anyOf",t.anyOf),n(l+"/oneOf",t.oneOf),r(l+"/not",t.not)}}function n(e,t){if(Array.isArray(t))for(var n=0;n<t.length;n++)r(e+"/"+n,t[n])}function o(e,t){if(t&&"object"==typeof t)for(var n in t)r(e+"/"+n,t[n])}var i={},a={};return r(e,t),new rV(i,a)};var rW=rH.scan,rQ=rE.ValidatorResult,rK=rE.ValidatorResultError,rJ=rE.SchemaError,rY=rE.SchemaContext,rX=function e(){this.customFormats=Object.create(e.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(r1),this.attributes=Object.create(rN.validators)};function r0(e){var t="string"==typeof e?e:e.$ref;return"string"==typeof t&&t}rX.prototype.customFormats={},rX.prototype.schemas=null,rX.prototype.types=null,rX.prototype.attributes=null,rX.prototype.unresolvedRefs=null,rX.prototype.addSchema=function(e,t){var r=this;if(!e)return null;var n=rW(t||"/",e),o=t||e.$id||e.id;for(var i in n.id)this.schemas[i]=n.id[i];for(var i in n.ref)this.unresolvedRefs.push(i);return this.unresolvedRefs=this.unresolvedRefs.filter(function(e){return void 0===r.schemas[e]}),this.schemas[o]},rX.prototype.addSubSchemaArray=function(e,t){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addSubSchema(e,t[r])},rX.prototype.addSubSchemaObject=function(e,t){if(t&&"object"==typeof t)for(var r in t)this.addSubSchema(e,t[r])},rX.prototype.setSchemas=function(e){this.schemas=e},rX.prototype.getSchema=function(e){return this.schemas[e]},rX.prototype.validate=function(e,t,r,n){if("boolean"!=typeof t&&"object"!=typeof t||null===t)throw new rJ("Expected `schema` to be an object or boolean");r||(r={});var o=t.$id||t.id,i=I.resolve(r.base||"/",o||"");if(!n){(n=new rY(t,r,[],i,Object.create(this.schemas))).schemas[i]||(n.schemas[i]=t);var a=rW(i,t);for(var s in a.id){var c=a.id[s];n.schemas[s]=c}}if(r.required&&void 0===e){var l=new rQ(e,t,r,n);return l.addError("is required, but is undefined"),l}var l=this.validateSchema(e,t,r,n);if(l){if(r.throwAll&&l.errors.length)throw new rK(l)}else throw Error("Result undefined");return l},rX.prototype.validateSchema=function(e,t,r,n){var o=new rQ(e,t,r,n);if("boolean"==typeof t)!0===t?t={}:!1===t&&(t={type:[]});else if(!t)throw Error("schema is undefined");if(t.extends){if(Array.isArray(t.extends)){var i={schema:t,ctx:n};t.extends.forEach(this.schemaTraverser.bind(this,i)),t=i.schema,i.schema=null,i.ctx=null,i=null}else t=rE.deepMerge(t,this.superResolve(t.extends,n))}var a=r0(t);if(a){var s=this.resolve(t,a,n),c=new rY(s.subschema,r,n.path,s.switchSchema,n.schemas);return this.validateSchema(e,s.subschema,r,c)}var l=r&&r.skipAttributes||[];for(var u in t)if(!rN.ignoreProperties[u]&&0>l.indexOf(u)){var f=null,p=this.attributes[u];if(p)f=p.call(this,e,t,r,n);else if(!1===r.allowUnknownAttributes)throw new rJ("Unsupported attribute: "+u,t);f&&o.importErrors(f)}if("function"==typeof r.rewrite){var d=r.rewrite.call(this,e,t,r,n);o.instance=d}return o},rX.prototype.schemaTraverser=function(e,t){e.schema=rE.deepMerge(e.schema,this.superResolve(t,e.ctx))},rX.prototype.superResolve=function(e,t){var r=r0(e);return r?this.resolve(e,r,t).subschema:e},rX.prototype.resolve=function(e,t,r){if(t=r.resolve(t),r.schemas[t])return{subschema:r.schemas[t],switchSchema:t};var n=I.parse(t),o=n&&n.hash,i=o&&o.length&&t.substr(0,t.length-o.length);if(!i||!r.schemas[i])throw new rJ("no such schema <"+t+">",e);var a=rE.objectGetPath(r.schemas[i],o.substr(1));if(void 0===a)throw new rJ("no such schema "+o+" located in <"+i+">",e);return{subschema:a,switchSchema:t}},rX.prototype.testType=function(e,t,r,n,o){if(void 0!==o){if(null===o)throw new rJ('Unexpected null in "type" keyword');if("function"==typeof this.types[o])return this.types[o].call(this,e);if(o&&"object"==typeof o){var i=this.validateSchema(e,o,r,n);return void 0===i||!(i&&i.errors.length)}return!0}};var r1=rX.prototype.types={};r1.string=function(e){return"string"==typeof e},r1.number=function(e){return"number"==typeof e&&isFinite(e)},r1.integer=function(e){return"number"==typeof e&&e%1==0},r1.boolean=function(e){return"boolean"==typeof e},r1.array=function(e){return Array.isArray(e)},r1.null=function(e){return null===e},r1.date=function(e){return e instanceof Date},r1.any=function(e){return!0},r1.object=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!(e instanceof Date)};var r2=j.Validator=rX;j.ValidatorResult=rE.ValidatorResult,j.ValidatorResultError=rE.ValidatorResultError,j.ValidationError=rE.ValidationError,j.SchemaError=rE.SchemaError,j.SchemaScanResult=rH.SchemaScanResult,j.scan=rH.scan,j.validate=function(e,t,r){return new r2().validate(e,t,r)};var r9={},r3={};Object.defineProperty(r3,"__esModule",{value:!0}),r3.supportedParserVersions=r3.requiredConfigProperties=r3.LOGGING_TYPE=void 0,(o=r3.LOGGING_TYPE||(r3.LOGGING_TYPE={})).DATA_FETCH_FAILURE="Dynamic_Eventing_Data_Fetch_Failure",o.DATA_FETCH_TIMEOUT="Dynamic_Eventing_Data_Fetch_Timeout",o.DATA_INVALID_FORMAT="Dynamic_Eventing_Data_Invalid_Format",o.DATA_UNSUPPORTED_PARSER="Dynamic_Eventing_Data_Unsupported_Parser_Version",o.SCHEMA_FETCH_FAILURE="Dynamic_Eventing_Schema_Fetch_Failure",o.SCHEMA_FETCH_TIMEOUT="Dynamic_Eventing_Schema_Fetch_Timeout",o.KEY_NOT_FOUND="Dynamic_Eventing_Key_Not_Found",o.SUBSTITUTION_NOT_FOUND="Dynamic_Eventing_Substitution_Not_Found",o.DATA_SENT="Dynamic_Eventing_Data_Sent",o.VALIDATION_ERROR="Dynamic_Eventing_Validation_Error",r3.requiredConfigProperties=["configVersion","parserVersion","Events"],r3.supportedParserVersions=[1];var r5={};Object.defineProperty(r5,"__esModule",{value:!0});var r6=function(e){return("string"==typeof e||e instanceof String)&&""!==e},r4={event_sender_purpose:r6,event_sender_name:r6,scope_area:r6,screen:r6,action:r6,object:r6},r8=function(){function e(e){void 0===e&&(e=[]),this.requiredProperties=e}return e.prototype.validate=function(e){var t=[],r=Object.keys(e);return this.requiredProperties.forEach(function(e){r.includes(e)||t.push({message:"".concat(e," is required but is missing.")})}),r.forEach(function(r){var n,o=!0;r4[r]?r4[r](e[r])||t.push({message:"".concat(r," does not match the expected value type.")}):r6(e[r])||Number.isInteger(e[r])||"boolean"==typeof e[r]||"object"==typeof(n=e[r])&&Object.keys(n).length>0||t.push({message:"".concat(r," does not have a value.")})}),t},e}();r5.default=r8;var r7=S&&S.__assign||function(){return(r7=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ne=S&&S.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},nt=S&&S.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},nr=S&&S.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},nn=S&&S.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},no=S&&S.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r9,"__esModule",{value:!0});var ni=no(r5),na=function(){function e(e){var t=e.errorHandler,r=e.eventHandler,n=e.sourceData,o=this;this.eventsData={configVersion:"0",parserVersion:0,Events:{}},this.dataLoaded=new Promise(function(e){o.dataLoadedResolve=e}),this.schemaLoaded=new Promise(function(e){o.schemaLoadedResolve=e}),this.eventHandler=function(e){},this.errorHandler=function(e,t,r){},this.lookupCache=new Map,this.configVersion="",this.parserVersion=0,this.deepCloneObject=function(e){return e?window.structuredClone?window.structuredClone(e):JSON.parse(JSON.stringify(e)):e},this.setEventHandler(r),this.setErrorHandler(t),n&&this.loadEventsData(n.url,n.backupUrl,n.fallbackData,n.fetchOptions||{})}return e.prototype.formatErrorMessage=function(e){return"".concat(e," Config Version: ").concat(this.configVersion)},e.prototype.getDataFromDotNotation=function(e,t){var r=null;try{r=e?e.split(".").reduce(function(e,t){var r=t.match(/([\w-]+)\[?(\d+)?\]?/);return void 0!==r[2]?e[r[1]][r[2]]:e[r[1]]},t):null}catch(e){r=null}return null!==r&&void 0!=r?r:null},e.prototype.getEventData=function(e,t,r){return ne(this,void 0,void 0,function(){var n,o,i,a,s,c,l,u,f,p=this;return nt(this,function(d){switch(d.label){case 0:return[4,this.dataLoaded];case 1:return d.sent(),n=0===e.indexOf("Events.")?e:"Events.".concat(e),null===(o=this.lookupCache.get(n)||this.getDataFromDotNotation(n,this.eventsData))&&this.errorHandler(r3.LOGGING_TYPE.KEY_NOT_FOUND,this.formatErrorMessage("event ".concat(n," not found in events data"))),i=r7({},o),a={},i.References&&(i.References.forEach(function(e){s=0===e.indexOf("References.")?e:"References.".concat(e);var t=p.lookupCache.get(s)||p.getDataFromDotNotation(s,p.eventsData);null===t&&p.errorHandler(r3.LOGGING_TYPE.KEY_NOT_FOUND,p.formatErrorMessage("References ".concat(e," not found in events data"))),Object.assign(a,t)}),delete i.References),c=this.deepCloneObject(r7(r7({},a),i)),l=function(t,n,o,i){n.forEach(function(n){var a=p.getDataFromDotNotation(n[1],r),s=null!==a?a:"";o[t]===n[0]?o[t]=s:o[t]=o[t].replace(n[0],s),null===a&&(!1!==i?p.errorHandler(r3.LOGGING_TYPE.SUBSTITUTION_NOT_FOUND,p.formatErrorMessage("".concat(n[1]," not found in lookup data for property ").concat(t," for event ").concat(e))):""===c[t]&&delete c[t])})},u=function(e){Object.keys(e).forEach(function(r){if("string"==typeof e[r]){var n=nn([],nr(e[r].matchAll(/{{(.*?)}}/g)),!1);if(l(r,n,e,!0),"string"==typeof e[r]){var o=nn([],nr(e[r].matchAll(/<<(.*?)>>/g)),!1);l(r,o,e,!1)}t&&t[r]&&""===e[r]&&(f[r]=t[r])}else u(e[r])})},f={},u(c),[2,Promise.resolve(r7(r7({},c),f))]}})})},e.prototype.fetchDataFromUrl=function(e,t,r,n,o,i){var a=this;if(!e&&!t)return Promise.resolve(r);var s=(null==n?void 0:n.timeout)||3e4,c=new AbortController,l=c.signal,u=setTimeout(function(){return c.abort()},s);return fetch(e,{method:"GET",credentials:"omit",signal:l}).then(function(e){if(!e.ok){var t=Error("primary fetch returned status code ".concat(e.status));throw t.name=o,t}return e.json()}).catch(function(n){var s=n.message||"";return(t&&(s="".concat(s," - attempting backup: ")),"AbortError"===n.name?a.errorHandler(i,"fetch aborted",{url:e}):n.name===o?a.errorHandler(n.name,s,{url:e}):a.errorHandler(o,"fetch failed ".concat(s),{url:e}),t)?fetch(t,{method:"GET",credentials:"omit",signal:l}).then(function(e){if(!e.ok){var t=Error("backup fetch returned status code ".concat(e.status));throw t.name=o,t}return e.json()}).catch(function(e){var n=e.message||"";return"AbortError"===e.name?a.errorHandler(i,"backup fetch aborted",{url:t}):e.name===o?a.errorHandler(e.name,n,{url:t}):a.errorHandler(o,"backup fetch failed ".concat(n),{url:t}),r}):r}).finally(function(){clearTimeout(u)})},e.prototype.loadEventsData=function(e,t,r,n){var o=this;return this.fetchDataFromUrl(e,t,r,n,r3.LOGGING_TYPE.DATA_FETCH_FAILURE,r3.LOGGING_TYPE.DATA_FETCH_TIMEOUT).then(function(e){o.setEventsData(e)})},e.prototype.setEventsData=function(e){var t,r,n=this;this.eventsData=e,this.configVersion=null===(t=this.eventsData)||void 0===t?void 0:t.configVersion,this.parserVersion=null===(r=this.eventsData)||void 0===r?void 0:r.parserVersion;var o=[];r3.requiredConfigProperties.forEach(function(e){n.eventsData&&void 0===n.eventsData[e]&&o.push("".concat(e," not present"))}),o.length>0?this.errorHandler(r3.LOGGING_TYPE.DATA_INVALID_FORMAT,this.formatErrorMessage(o.join(", "))):r3.supportedParserVersions.includes(this.parserVersion)||this.errorHandler(r3.LOGGING_TYPE.DATA_UNSUPPORTED_PARSER,this.formatErrorMessage("".concat(this.parserVersion," is not a supported parser version."))),this.dataLoadedResolve()},e.prototype.setEventHandler=function(e){this.eventHandler=e},e.prototype.setErrorHandler=function(e){this.errorHandler=e},e.prototype.handleEvent=function(e,t,r){return ne(this,void 0,void 0,function(){var n;return nt(this,function(o){switch(o.label){case 0:return[4,this.getEventData(e,t,r)];case 1:return n=o.sent(),this.validateAgainstSchema(n),this.eventHandler(n),[2,Promise.resolve(n)]}})})},e.prototype.validateAgainstSchema=function(e){return ne(this,void 0,void 0,function(){var t,r;return nt(this,function(n){return(t=new ni.default().validate(e)).length>0&&(r=t.reduce(function(e,t){return e+"".concat(t.message," ")},""),this.errorHandler(r3.LOGGING_TYPE.VALIDATION_ERROR,r.trim(),e)),[2,Promise.resolve(t)]})})},e}();r9.default=na;var ns=S&&S.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),nc=S&&S.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},nl=S&&S.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},nu=S&&S.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(F,"__esModule",{value:!0});var nf=nu(r9),np=nu({$schema:"http://json-schema.org/schema#",type:"object",properties:{event_sender_purpose:{$ref:"#/definitions/nonEmptyString"},event_sender_name:{$ref:"#/definitions/nonEmptyString"},event_sender_version:{type:"string",pattern:"^[0-9]+\\.[0-9]+$"},scope_area:{$ref:"#/definitions/nonEmptyString"},screen:{$ref:"#/definitions/nonEmptyString"},action:{$ref:"#/definitions/nonEmptyString"},object:{$ref:"#/definitions/nonEmptyString"}},required:["screen","object","action"],not:{anyOf:[{required:["ref"]},{required:["events"]}]},additionalProperties:{oneOf:[{$ref:"#/definitions/nonEmptyString"},{$ref:"#/definitions/nonEmptyInteger"},{type:"boolean"}]},definitions:{nonEmptyString:{type:"string",minLength:1},nonEmptyInteger:{type:"integer",minLength:1}}}),nd=function(e){function t(t){var r=t.errorHandler,n=t.eventHandler,o=t.sourceData,i=t.schemaData,a=e.call(this,{errorHandler:r,eventHandler:n,sourceData:o})||this;return a.schema={},i?a.loadSchema(i.url,i.backupUrl,i.fallbackData,i.fetchOptions||{}):a.loadSchema("","",np.default,{}),a}return ns(t,e),t.prototype.loadSchema=function(e,t,r,n){var o=this;return this.fetchDataFromUrl(e,t,r,n,r3.LOGGING_TYPE.SCHEMA_FETCH_FAILURE,r3.LOGGING_TYPE.SCHEMA_FETCH_TIMEOUT).then(function(e){o.setSchema(e)})},t.prototype.setSchema=function(e){this.schema=e,this.schemaLoadedResolve()},t.prototype.validateAgainstSchema=function(e){return nc(this,void 0,void 0,function(){var t;return nl(this,function(r){switch(r.label){case 0:return[4,this.schemaLoaded];case 1:if(r.sent(),0===Object.keys(this.schema).length)return[2,Promise.resolve([])];return(t=new j.Validator().validate(e,this.schema)).errors.length>0&&this.errorHandler(r3.LOGGING_TYPE.VALIDATION_ERROR,t.errors.toString(),e),[2,Promise.resolve(t.errors)]}})})},t}(nf.default);F.default=nd,a=S&&S.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Object.defineProperty(O,"__esModule",{value:!0}),O.BaseEventing=O.default=void 0,Object.defineProperty(O,"default",{enumerable:!0,get:function(){return a(F).default}}),Object.defineProperty(O,"BaseEventing",{enumerable:!0,get:function(){return a(r9).default}});let nh=function(e,t){for(var r=0;r<t.length;r++){let n=t[r];if("string"!=typeof n&&!Array.isArray(n)){for(let t in n)if("default"!==t&&!(t in e)){let r=Object.getOwnPropertyDescriptor(n,t);r&&Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:()=>n[t]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}({__proto__:null,default:O&&O.__esModule&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O},[O])}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.rv=function(){return"1.2.0"},r.ruid="bundler=rspack@1.2.0",(()=>{var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,c=(e,t)=>{for(var r in t||(t={}))i.call(t,r)&&s(e,r,t[r]);if(o)for(var r of o(t))a.call(t,r)&&s(e,r,t[r]);return e},l=(e,r)=>t(e,n(r)),u=(e,t,r)=>new Promise((n,o)=>{var i=e=>{try{s(r.next(e))}catch(e){o(e)}},a=e=>{try{s(r.throw(e))}catch(e){o(e)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,a);s((r=r.apply(e,t)).next())});let f={hasInitialized:!1,Log:()=>{}},p="MC_LOGGER_QUEUE_IS_FULL",d={hasInitialized:!1,mainQueue:[],waitQueue:[],isBatchServiceActive:!1,isProcessingMainQueue:!1,configurablePropeties:{time:6e3,maxQueueSize:440},batchServiceState:{isPageNavigationOccuring:!1,mainQueuePayloadSize:0}},h=e=>e.reduce((e,t)=>(e[t.keyIndex]=c({},t),delete e[t.keyIndex].keyIndex,e),{});function y(){if(d.isProcessingMainQueue=!0,0===d.mainQueue.length){d.isProcessingMainQueue=!1;return}f.Log({message:"ECS Batch Logs",data:h(d.mainQueue.slice())});let{newMainQueue:e,queuePayloadSize:t}=d.waitQueue.reduce((e,t)=>(e.newMainQueue.push(t.log),e.queuePayloadSize+=t.payLoadSize,e),{newMainQueue:[],queuePayloadSize:0});d.mainQueue=e,d.batchServiceState.mainQueuePayloadSize=t,d.isProcessingMainQueue=!1,d.waitQueue=[]}let m=()=>{!d.isBatchServiceActive&&f.hasInitialized&&(d.isBatchServiceActive=!0,window.addEventListener("beforeunload",()=>{d.batchServiceState.isPageNavigationOccuring=!0,y()}),window.addEventListener(p,()=>{d.batchServiceState.isPageNavigationOccuring||y()}),setInterval(()=>{d.batchServiceState.isPageNavigationOccuring||d.isProcessingMainQueue||y()},d.configurablePropeties.time))},v=e=>{if(d.batchServiceState.isPageNavigationOccuring&&f.hasInitialized){f.Log({message:"ECS Batch Logs",data:h(d.mainQueue.slice())});return}if(void 0===e.keyIndex)throw Error("Invalid log configuration: no keyIndex");let t=JSON.stringify(e.data).length;d.isProcessingMainQueue?d.waitQueue.push({log:e,payLoadSize:t}):function(e){let t=!1;return d.batchServiceState.mainQueuePayloadSize+e>=d.configurablePropeties.maxQueueSize&&(t=!0),t}(t)?(window.dispatchEvent(new Event(p)),d.waitQueue.push({log:e,payLoadSize:t})):(d.mainQueue.push(e),d.batchServiceState.mainQueuePayloadSize+=t)};function g(e){e.data=l(c({},e.data),{isError:!1,log_timestamp:new Date}),v(e)}function b(e){let t={isError:!0,log_timestamp:new Date};e.data=c(c({},e.data),t),f.Log(e)}let w=e=>{f.Log=e,f.hasInitialized=!0,m()},A=!1,_={init:function(e,t){return u(this,null,function*(){if(A)throw Error("The library is already initialized");yield function(e,t){return u(this,null,function*(){let r=S(!0);if(void 0===r)return;r.load=function(e,t){return u(this,null,function*(){return yield new Promise((n,o)=>{let i=document.createElement("script");i.type="text/javascript",i.async=!0,i.addEventListener("load",function(){n(void 0)},{once:!0}),i.onerror=function(){o(Error("Failed to load script"))},i.src="https://cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js";let a=document.getElementsByTagName("script")[0];if(null!=a.parentNode)a.parentNode.insertBefore(i,a);else throw b({message:"The Segment Library has failed the first attempt to load",data:{step:"The library has failed to insert library script tag"}}),Error("Issue with launching script");r._loadOptions=t})})},r._writeKey=`${e}`,r.SNIPPET_VERSION="4.15.3";let n=0,o=!1;try{for(;n<3&&!o;)try{yield r.load(`${e}`,t),o=!0}catch(e){if(n++,3===n)throw Error(e);yield function(e){return u(this,null,function*(){return yield new Promise(e=>setTimeout(e,1e3))})}(0)}yield u(this,null,function*(){return yield new Promise(e=>{r.ready(()=>{e()})})}),A=!0}catch(o){let t=!1;g({message:"The Segment Library has failed the first attempt to load",data:{step:"First attempt to load failed trying to see if adblocker is preventing the library from loading",error:o.message},keyIndex:"load_segment_failed_first"});try{let t=yield fetch("https://cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js"),n=yield t.text(),o=document.getElementsByTagName("script")[0];if(null!=o.parentNode&&""!==n){try{let e=document.createElement("script");e.type="text/javascript",e.innerHTML=n,o.parentNode.insertBefore(e,o)}catch(e){throw b({message:"The Segment Library has failed the first attempt to load",data:{step:"The library has failed to insert library script code"}}),Error("Issue with launching script")}A=!0,yield u(this,null,function*(){return yield new Promise(e=>{r.ready(()=>{e()})})});return}b({message:"The Segment Library has failed the first attempt to load",data:{step:"The library has failed the second attempt to load via the script type text/javascript tag"}})}catch(e){e instanceof TypeError?t=!0:(b({message:"The Segment Library has failed the first attempt to load",data:{step:"The library has failed the second attempt to load",error:e}}),console.error("The Segment Lbrary has failed to load. Attached is one of the error messages",JSON.stringify(e)))}if(window.analytics=void 0,console.error(`The Segment Lbrary has failed to load after retrying ${n} times. Attached is the final error message`,o.message),t)throw Error("Loading the Segment Library has failed due to it's resource request being blocked")}})}(e,t),null!=window.analytics&&(_.Analytics=window.analytics)})},Analytics:{},attachAnalyticsToWindow:S},E=e=>void 0!==e.track;function S(e){let t=_.Analytics=window.analytics=void 0!==window.analytics?window.analytics:[];if(void 0===t.initialize){if(void 0!==e&&e&&t.invoked)return t;if(t.invoked)return;t.invoked=!0,t.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"],t.factory=function(e){return function(){let r=Array.prototype.slice.call(arguments);return r.unshift(e),t.push(r),t}};for(let e=0;e<t.methods.length;e++){let r=t.methods[e];t[r]=t.factory(r)}return t}}let O={abortAppfabricCreationEvent:new AbortController,abortAppfabricInitialziedEvent:new AbortController,abortInstanceDetectionEvent:new AbortController,shouldAbortEverything:!1,shouldAbortAppFabricListeners:!1},F=()=>{O.shouldAbortEverything=!0,O.abortAppfabricCreationEvent.abort(),O.abortAppfabricInitialziedEvent.abort(),O.abortInstanceDetectionEvent.abort()},j=()=>{O.abortAppfabricCreationEvent.abort(),O.abortAppfabricInitialziedEvent.abort()},I=()=>O.abortInstanceDetectionEvent.abort(),P=()=>O.abortAppfabricInitialziedEvent.signal,T=()=>O.abortInstanceDetectionEvent.signal,x="INSTANCE_DETECTION_LISTENER",k="DETECTED_INSTANCE_SHARING_STATE",D=()=>{window.__MC_ECS_LIB||(window.__MC_ECS_LIB={has_lib_init_started:!1,has_appfabric_init_detection_listener_started:!1})},C=({internalState:e,EcsTracking:t,LOGGER_STATE:r,BATCH_LOGS_INTERNAL_STATE:n})=>{window.addEventListener(x,()=>{window.dispatchEvent(new CustomEvent(k,{detail:{internalState:e,EcsTracking:t,LOGGER_STATE:r,BATCH_LOGS_INTERNAL_STATE:n},cancelable:!1}))})},R=({internalState:e,EcsTracking:t,LOGGER_STATE:r,BATCH_LOGS_INTERNAL_STATE:n})=>{window.dispatchEvent(new CustomEvent(k,{detail:{internalState:e,EcsTracking:t,LOGGER_STATE:r,BATCH_LOGS_INTERNAL_STATE:n},cancelable:!1}))},z="appFabricHasInitialized_ecs",M={hasAppFabricInitialized:!!window.appFabricInstance},L=window.__MC_ECS_LIB?window.__MC_ECS_LIB.has_appfabric_init_detection_listener_started:(D(),!1);M.hasAppFabricInitialized||L||(window.__MC_ECS_LIB.has_appfabric_init_detection_listener_started=!0,window.addEventListener("appFabricInstanceCreated",()=>{M.hasAppFabricInitialized=!0,window.dispatchEvent(new Event(z))},{signal:O.abortAppfabricCreationEvent.signal}));let N=(e,t)=>u(void 0,null,function*(){return t&&console.log("mc_ecs_logs: Window.AppFabric available"),g({message:"ECS Tracking Library: AppFabric Initialize",data:{step:"detectIfAppFabricHasLoaded"},keyIndex:"appfabric_init_if_loaded"}),new Promise((r,n)=>{let o={hasPromiseResolved:!1,hasEventBeenHandled:!1},i=()=>u(void 0,null,function*(){var i,a;if(t&&console.log("mc_ecs_logs: Connecting to Appfabric"),!o.hasEventBeenHandled){o.hasEventBeenHandled=!0;try{let n;let s=window.appFabricInstance;if(null==(i=window.__shellInternal.segment)?void 0:i.analytics)t&&console.log("mc_ecs_logs: Appfabric Analytics library active. listening on events"),n=yield s.pubsub.subscribe("appfabric-analytics-api-event-data",t=>{var r;console.log("Host app received analytics data from appfabric-analytics-api-event-data topic",t);try{e.track(t),g({message:"ECS Tracking Library: AppFabric Initialize",data:{step:"SegmentInstance track fired"},keyIndex:"appfabric_init_track_fired"})}catch(e){b({message:"ECS Tracking Library: AppFabric Initialize",data:{step:"SegmentInstance track failed",appFabricInstance:typeof s,segmentAnalytics:typeof(null==(r=window.__shellInternal.segment)?void 0:r.analytics)},keyIndex:"appfabric_init"})}}),g({message:"ECS Tracking Library: AppFabric Initialize",data:{step:"apfInstance subscribe attempted",appFabricInstance:typeof s,segmentAnalytics:typeof(null==(a=window.__shellInternal.segment)?void 0:a.analytics)},keyIndex:"appfabric_init_track_attempted"});else{let e;t&&console.log("mc_ecs_logs: Appfabric Analytics library inActive. Launching initialize strategy");let r=0;do try{yield s.analytics.init(),r++,e=!1}catch(t){e=!0,b({message:"ECS Tracking Library: AppFabric Initialize",data:{step:"AppFabric failed to initialize"},keyIndex:"appfabric_init_failed_init"})}while(r<2&&e)}delete window.__shellInternal.segment.analytics,delete window.appFabricInstance.analytics,Object.defineProperty(window.__shellInternal.segment,"analytics",{value:e,writable:!1}),Object.defineProperty(window.appFabricInstance,"analytics",{value:e,writable:!1}),t&&console.log("mc_ecs_logs: Converted AppFabric Analytics to this library"),n&&(s.pubsub.unsubscribe(n),g({message:"ECS Tracking Library: AppFabric Initialize",data:{step:"AppFabric unsubscribe"},keyIndex:"appfabric_init_unsubscribe"})),r(!0),o.hasPromiseResolved=!0}catch(e){t&&(console.log("mc_ecs_logs: Error with connecting to Appfabric analytics"),console.error(e)),g({message:"ECS Tracking Library: AppFabric Initialize",data:{step:"AppFabric Error with connecting to Appfabric analytics"},keyIndex:"appfabric_init_error_connect"}),n(e),o.hasPromiseResolved=!0}}});window.AppFabric&&window.appFabricInstance?(t&&console.log("mc_ecs_logs: AppFabrics is initialized attempting to connect to it"),g({message:"ECS Tracking Library: AppFabric Initialize",data:{step:"connectAppFabricsAnalytics resolve"},keyIndex:"appfabric_init_resolve"}),i().then(r).catch(n)):(t&&console.log("mc_ecs_logs: Waiting for AppFabric Initialization Event"),P().addEventListener("abort",()=>{o.hasPromiseResolved||r(!1)}),g({message:"ECS Tracking Library: AppFabric Initialize",data:{step:"Listener with getAbortAppfabricInitialziedEventSignal"},keyIndex:"appfabric_init_listener"}),window.addEventListener(z,i,{signal:P()}))})}),$=e=>({payload:t,next:r})=>{switch(t.obj.type){case"track":if(t.obj.properties.event_sender_app_id){let r=c(c(c({},null==e?void 0:e.track),null==e?void 0:e.all),null==e?void 0:e.userSessionInfo);t.obj.context=c(c({initiative_name:"appfabric"},t.obj.context),r),t.obj.properties=c(c({initiative_name:"appfabric"},t.obj.properties),r)}break;case"identify":break;default:console.warn("unsupported event type: ",t.obj.type)}r(t)},Z=["object","action","org","purpose","scope","initiative_name"],G=["object","action","org","purpose","scope"],U=({payload:e,next:t})=>{if("track"===e.obj.type){if(e.obj.properties["__mc-dynamic-eventing"]){for(let t of G)if(!e.obj.properties[t]){g({message:"Event Dropped",data:{eventObject:e.obj,fullContext:e,requiredProp:t},keyIndex:"dropped_event"}),console.warn("Dropping event because it doesn't contain the required property: ",t,e.obj);return}}else for(let t of Z)if(!e.obj.properties[t]){g({message:"Event Dropped",data:{eventObject:e.obj,fullContext:e,requiredProp:t},keyIndex:"dropped_event"}),console.warn("Dropping event because it doesn't contain the required property: ",t,e.obj);return}}t(e)},q=["locale","page","userAgentData","userAgent"],B=e=>({payload:t,next:r})=>{if(!e){r(t);return}let n={};for(let r of[...Z,...e])t.obj.context[r]&&(n[r]=t.obj.context[r]);let o=new Set(e);for(let e of(o.has("ip")||(n.ip="0.0.0.0"),q))o.has(e)||(n[e]=null);t.obj.context=n,r(t)},H=(e,t,r={})=>{if(null==t){if(g({message:"Track: Blocked Event",data:{eventObject:t,localOverrides:r},keyIndex:"blocked_event_emptyObject"}),e.isInDebugMode)throw Error("The 'eventObject' is required for sending events. Please refer to the ECS standard doc");console.trace(),console.warn("The 'eventObject' is required for sending events. Please refer to the ECS standard doc")}},V=(e,t,r="library")=>{if(void 0===t.object||void 0===t.action){g({message:"Track: Blocked Event",data:{eventObject:t,missingField:{object:void 0===t.object,action:void 0===t.action}},keyIndex:"blocked_event_missing_object_action"});let n="There is an issue with missing or incorrectly spelled action or object properties in your ECS event setup.";if("library"!==r&&(n="There is an issue with missing or incorrectly spelled action or object properties in your Authoring Tool tracking plan."),e.isInDebugMode)throw Error(n);console.trace(),console.error(n)}},W=(e,t,r,n={})=>{t[r]!==Symbol.for("__mc-ecs-storage")&&t[r]!==Symbol.for("__mc-dynamic-eventing")&&(g({message:"Track: Invalid Event",data:{eventObject:t,localOverrides:n,isDev:e.isInDebugMode},keyIndex:"invalid_event"}),e.isInDebugMode&&(console.trace(),console.warn(`The track event does not originate with '${r}'`),console.warn("Please reach out to the mc-ecs-event-help channel for support"),console.warn("Event: ",JSON.stringify(t,null,2))))},Q=(e,t,r={})=>{for(let n in r){if(void 0===t[n]){if(g({message:"Track: Blocked Event",data:{eventObject:t,localOverrides:r,invalidCustomProperties:!0},keyIndex:`blocked_event_${n}`}),e.isInDebugMode)throw Error(`Custom Properties can't be added to this event object: ${n}`);console.trace(),console.warn(`Custom Properties can't be added to this event object: ${n}`);return}if(void 0!==e.validator&&!e.validator.track(r[n])){if(g({message:"Track: Blocked Event",data:{eventObject:t,localOverrides:r,invalidProperty:!0},keyIndex:`blocked_event_${n}`}),e.isInDebugMode)throw Error(`The value: ${r[n]} provided to the property ${n} is invalid `);console.trace(),console.warn(`The value: ${r[n]} provided to the property ${n} is invalid `);return}}},K=(e,t,r={})=>{if(void 0!==e.validator){for(let n in t)if(!e.validator.track(t[n])){if(g({message:"Track: Blocked Event",data:{eventObject:t,localOverrides:r,invalidProperty:!0},keyIndex:`blocked_event_${n}`}),e.isInDebugMode)throw Error(`The value: ${t[n]} provided to the property ${n} is invalid `);console.trace(),console.warn(`The value: ${t[n]} provided to the property ${n} is invalid `);return}}},J="object"==typeof window;if("function"==typeof importScripts)throw Error("This library cannot be used inside of a web worker");if(!J)throw Error("This library can only be used on the web");let Y={userSessionInfo:{},isInDebugMode:!1,hasQueueFlushed:!1,track:{},identify:{},all:{},Segment:_},X={hasInitialized:!1,initialize:function(e,t,r){return u(this,arguments,function*(e,t,r,n={cancelAllListeners:!1,cancelAppfabricListeners:!1,loggerFunction:()=>{}}){var o;if(""===e||void 0===e)throw Error("Missing Write Key");if(w(n.loggerFunction),window.__MC_ECS_LIB.has_lib_init_started)return;for(let e in void 0!==n.validator&&(Y.validator=n.validator),C({internalState:Y,EcsTracking:X,LOGGER_STATE:f,BATCH_LOGS_INTERNAL_STATE:d}),window.__MC_ECS_LIB.has_lib_init_started=!0,R({internalState:Y,EcsTracking:X,LOGGER_STATE:f,BATCH_LOGS_INTERNAL_STATE:d}),r){let t=r[e];Y[e]=t}n.cancelAllListeners?F():n.cancelAppfabricListeners&&j();let i=l(c({},t),{user:{persist:!1}});if(void 0!==t.integrations&&(i.integrations=t.integrations),void 0!==t.user&&(i.user=c(c({},i.user),t.user)),void 0!==window.analytics&&(window.analytics.addSourceMiddleware($(r)),window.analytics.addSourceMiddleware(U),window.analytics.addSourceMiddleware(B(null==r?void 0:r.allowList))),!X.hasInitialized){if(Array.isArray(window.analytics))for(let e of window.analytics)"track"===e[0]&&(e[2]=c(c(c(c({},e[2]),null==r?void 0:r.all),null==r?void 0:r.track),null==r?void 0:r.userSessionInfo),e[3]={context:c(c(c(c({},e[3].context),null==r?void 0:r.all),null==r?void 0:r.track),null==r?void 0:r.userSessionInfo)});try{yield _.init(e,i)}catch(e){g({message:"ECS Tracking Library: initialize function",data:{step:"The Analytics library failed to initialize: Ad blocker detected",hasLibraryInitialized:!1},keyIndex:"ad_blocker_detected"}),console.warn("The Analytics library failed to initialize. This is most likely due to an adblocker. If you're using an adblocker please disable it and try again"),X.hasInitialized=!1,F();return}if(X.hasInitialized=(null==(o=window.analytics)?void 0:o.initialize)!=null,X.hasInitialized){if(void 0!==window.analytics&&!n.cancelAllListeners&&!n.cancelAppfabricListeners){let e=setTimeout(()=>{j()},3e5);N(window.analytics,Y.isInDebugMode).catch(e=>{b({message:"ECS Tracking Library: initialize function",data:{step:"Appfabric detection failed"}}),console.error(e)}).finally(()=>{clearTimeout(e),j()})}}else throw b({message:"ECS Tracking Library: initialize function",data:{step:"The Analytics library failed to initialize",hasLibraryInitialized:!1}}),Error("Analytics library failed to initialize. Please inspect the library initialization process")}})},track:function(e,t){if(null==e){if(g({message:"Track: Blocked Event",data:{eventObject:e,localOverrides:t},keyIndex:"blocked_event_emptyObject"}),Y.isInDebugMode)throw Error("The 'eventObject' is required for sending events. Please refer to the ECS standard doc");console.trace(),console.warn("The 'eventObject' is required for sending events. Please refer to the ECS standard doc");return}if(void 0===e.object||void 0===e.action){if(g({message:"Track: Blocked Event",data:{eventObject:e,missingField:{object:void 0===e.object,action:void 0===e.action}},keyIndex:"blocked_event_missing_object_action"}),Y.isInDebugMode)throw Error("The 'object' and 'action' property are required for sending events. Please refer to the ECS standard doc");console.trace(),console.warn("The 'object' and 'action' property are required for sending events. Please refer to the ECS standard doc");return}for(let r in e["__mc-ecs-storage"]!==Symbol.for("__mc-ecs-storage")&&(g({message:"Track: Invalid Event",data:{eventObject:e,localOverrides:t,isDev:Y.isInDebugMode},keyIndex:"invalid_event"}),Y.isInDebugMode&&(console.trace(),console.warn("The track event does not originate from the mc-ecs-storage"),console.warn("Please reach out to the mc-ecs-event-help channel for support"),console.warn("Event: ",JSON.stringify(e,null,2)))),t){if(void 0===e[r]){if(g({message:"Track: Blocked Event",data:{eventObject:e,localOverrides:t,invalidCustomProperties:!0},keyIndex:`blocked_event_${r}`}),Y.isInDebugMode)throw Error(`Custom Properties can't be added to this event object: ${r}`);console.trace(),console.warn(`Custom Properties can't be added to this event object: ${r}`);return}if(void 0!==Y.validator&&!Y.validator.track(t[r])){if(g({message:"Track: Blocked Event",data:{eventObject:e,localOverrides:t,invalidProperty:!0},keyIndex:`blocked_event_${r}`}),Y.isInDebugMode)throw Error(`The value: ${t[r]} provided to the property ${r} is invalid `);console.trace(),console.warn(`The value: ${t[r]} provided to the property ${r} is invalid `);return}}if(void 0!==Y.validator){for(let r in e)if(!Y.validator.track(e[r])){if(g({message:"Track: Blocked Event",data:{eventObject:e,localOverrides:t,invalidProperty:!0},keyIndex:`blocked_event_${r}`}),Y.isInDebugMode)throw Error(`The value: ${e[r]} provided to the property ${r} is invalid `);console.trace(),console.warn(`The value: ${e[r]} provided to the property ${r} is invalid `);return}}if(E(_.Analytics)){let r=c(c(c({},e),t),Y.userSessionInfo),n={context:c(c(c({},Y.all),Y.track),Y.userSessionInfo)};Y.Segment.Analytics.track(`${r.object}:${r.action}`,r,n)}},identify:function(e,t){if(""===e)throw Error("A user id will need to be provided when using this function");if(Y.__userId=e,E(_.Analytics)){Y.userSessionInfo=c({user_id:e},t);let r={context:c(c(c({},Y.all),Y.identify),Y.userSessionInfo)};Y.Segment.Analytics.identify(e,t,r)}},debug:function(){if(!Y.isInDebugMode&&(console.warn("DEBUGGER INITIALIZED"),Y.isInDebugMode=!0,E(_.Analytics)))for(let e of(Y.Segment.Analytics.debug(!0),["initialize","call_after_close","screen","identify","group","track","ready","alias","page","error","register","deregister"]))Y.Segment.Analytics.on(e,(e,t,r)=>{console.warn("Current Event: ",e),console.warn("Properties",t),console.warn("Options",r)})},dynamicTrack:function(e,t,n){return u(this,null,function*(){let o=new(yield Promise.resolve().then(r.bind(r,388)).then(e=>e.i)).BaseEventing({eventHandler:()=>{},errorHandler:r=>{"Dynamic_Eventing_Validation_Error"!==r&&(b({message:"ECS Dynamic Web Eventing Error",data:{event_data:r,config_url:e,dynamic_id:t,event_properties:n}}),Y.isInDebugMode&&console.error("Authoring Tool Error: "+r+"\nDynamic ID: "+t+"\nConfig URL: "+e))},sourceData:{url:e,fallbackData:{},backupUrl:""}});W(Y,n,"__mc-dynamic-eventing");let i=o.handleEvent(t,{},{}),a=yield i;if(E(_.Analytics)){let e=c(c(c({},a),n),Y.userSessionInfo),t={context:c(c(c({},Y.all),Y.track),Y.userSessionInfo)};Object.defineProperty(e,"__mc-dynamic-eventing",{value:Symbol.for("__mc-dynamic-eventing"),enumerable:!1,writable:!1,configurable:!1}),H(Y,e),V(Y,e,"authoring-tool"),Q(Y,e),K(Y,e),(!(null==e?void 0:e.screen)||(null==e?void 0:e.screen)==="<auto-populated>")&&(null==e?void 0:e.dynamic_screen)&&(e.screen=e.dynamic_screen),Y.Segment.Analytics.track(`${e.object}:${e.action}`,e,t)}})}},ee=window.__MC_ECS_LIB?window.__MC_ECS_LIB.has_lib_init_started:(D(),!1);_.attachAnalyticsToWindow(),(({internalState:e,EcsTracking:t,LOGGER_STATE:r,BATCH_LOGS_INTERNAL_STATE:n})=>{let o=!1;window.addEventListener(k,r=>{!o&&e!==r.detail.internalState&&(o=!0,Object.keys(r.detail.internalState).forEach(t=>{let n=r.detail.internalState[t];e[t]=n}),Object.keys(r.detail.EcsTracking).forEach(e=>{let n=r.detail.EcsTracking[e];t[e]=n}),r.detail.LOGGER_STATE.hasInitialized&&Array.isArray(n.mainQueue)&&n.mainQueue.forEach(e=>{r.detail.BATCH_LOGS_INTERNAL_STATE&&r.detail.BATCH_LOGS_INTERNAL_STATE.mainQueue&&Array.isArray(r.detail.BATCH_LOGS_INTERNAL_STATE.mainQueue)&&r.detail.BATCH_LOGS_INTERNAL_STATE.mainQueue.push(e)}),r.detail.LOGGER_STATE,r.detail.BATCH_LOGS_INTERNAL_STATE&&(n=r.detail.BATCH_LOGS_INTERNAL_STATE)),o&&I()},{signal:T()})})({internalState:Y,EcsTracking:X,LOGGER_STATE:f,BATCH_LOGS_INTERNAL_STATE:d}),ee&&window.dispatchEvent(new Event(x,{cancelable:!1}));let et={essential:"1",performance:"2",analytics:"3",advertising:"4"},er=e=>!(0>Object.values(et).indexOf(e))&&(function(){let e=window.OnetrustActiveGroups;return"string"!=typeof e?[]:e.split(",")})().includes(e),en={get:function(e){let t=document.cookie.split(/;\s*/);for(let r=0;r<t.length;r++){let[n,o]=t[r].split("=");if(decodeURIComponent(n)===e)return decodeURIComponent(o)}},set:function(e,t,{path:r="/",expires:n,domain:o}={}){let i=encodeURIComponent(e)+"="+encodeURIComponent(t);"string"==typeof r&&(i+=`;path=${r}`),void 0!==n&&"function"==typeof n.getMonth&&(i+=`;expires=${n}`),"string"==typeof o&&(i+=`;domain=${o}`),document.cookie=i},setWithCategory:function(e,t,r,n={}){er(e)&&en.set(t,r,{...n})},delete:function(e,t={}){en.set(e,"l8r sk8r",{...t,expires:new Date(0)})},categories:et};function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ei={defaultWindowLength:2,defaultK:3,maximumFrequency:11,throttleCalculation:!1},ea=new Map,es=["/content/upload","/content/folders/view","/content/list","/email/editor/edit","/email/templates/editor/edit"],ec=function(e,t){return Math.round((e.valueOf()-t.valueOf())/1e3)};function el(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=ea.get(e);if(i){var a=i.head,s=i.values,c=ec(t,a);if(c<0)return;if(c>=r)s[0]={requests:n?1:0,accepts:o?1:0,time:t},ea.set(e,{head:t,values:s});else{var l=s[c];s[c]={requests:n?l.requests+1:l.requests,accepts:o?l.accepts+1:l.accepts,time:t}}}}function eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ef(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ep(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ef(e,t,r[t])})}return e}function ed(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function eh(e){return function(e){if(Array.isArray(e))return eu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return eu(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eu(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ey(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var em={mode:"same-origin",credentials:"same-origin",redirect:"follow"},ev=function(){var e;function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:em,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),ef(this,"headers",void 0),ef(this,"isSessionValid",void 0),ef(this,"middlewares",void 0),ef(this,"options",void 0),this.options=e,this.headers=r,this.middlewares=[],this.isSessionValid=!0}return e=[{key:"convertJsonToFormData",value:function(e){if((void 0===e?"undefined":ey(e))!=="object")throw Error("convertJsonToFormData expects an object");var t=new FormData;return Object.keys(e).forEach(function(r){var n=e[r];"object"===ey(e[r])&&(n=JSON.stringify(e[r])),t.append(r,n)}),t}},{key:"setDefaultHeader",value:function(e,t){this.headers[e]=t}},{key:"addMiddleware",value:function(){for(var e,t=this,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=this.middlewares).push.apply(e,eh(n)),function(){return t.removeMiddleware.apply(t,eh(n))}}},{key:"removeMiddleware",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.middlewares=this.middlewares.filter(function(e){return!t.includes(e)})}},{key:"query",value:function(e,t){var r=e.substring(0,e.indexOf("?"))||e;if(!t){console.warn("Expected params to be provided and none were provided");return}return Object.keys(t).filter(function(e){return void 0!==t[e]&&null!==t[e]}).reduce(function(e,r,n){return e+(n>0?"&":"?")+encodeURIComponent(r)+"="+encodeURIComponent(t[r])},r)}},{key:"createRequest",value:function(e,t,r){var n,o=r.headers,i=r.body,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(r,["headers","body"]),s=ep({},this.headers,void 0===o?{}:o);return fetch.polyfill&&XMLHttpRequest.hasOpenPatch&&delete s["X-CSRF-Token"],n=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.split("?")[0],o=!0;es.includes(n)&&(o=!1);try{var i=new AbortController,a=i.signal;if(o){var s,c,l,u,f,p,d,h,y,m,v=(l=ei.defaultWindowLength,ea.forEach(function(e,t){var r=e.head;ec(new Date,r)>=l&&ea.delete(t)}),u=new Date,s=n,c=u,ea.has(s)||ea.set(s,{head:c,values:Array(ei.defaultWindowLength).fill({requests:0,accepts:0,time:null})}),el(s,c,ei.defaultWindowLength,!0,!1),y=(f=ea.get(n),p=ei.defaultWindowLength,d=f.values.reduce(function(e,t){var r=t.time,n=t.requests,o=t.accepts;return r&&ec(u,r)<p?[e[0]+n,e[1]+o]:e},[0,0]),h=function(e){if(Array.isArray(e))return e}(d)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,s=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(s)throw n}}return i}}(d,2)||function(e,t){if(e){if("string"==typeof e)return eo(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eo(e,t)}}(d,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],m=h[1],ei.throttleCalculation&&Math.random()<Math.max(0,(y-ei.defaultK*m)/(y+1))||y>=ei.maximumFrequency?[!0,function(e){return e}]:[!1,function(e){return el(n,u,ei.defaultWindowLength,!1,e)}]),g=v[0];if(t=v[1],g)return i.abort("The request was aborted due to throttle limit."),Promise.reject({message:"Promise rejected due to throttle limit.",requestedPath:n})}var b=Object.assign(r,{signal:a});return fetch(e,b).then(function(e){return o&&(null==e?void 0:e.status)<500&&t(!0),e})}catch(e){if("AbortError"===e.name)throw e;throw o&&t(!1),e}}(e,ed(ep({},this.options,a),{method:t,headers:s,body:void 0===i?void 0:i})),this.middlewares.reduce(function(e,t){return e.then(t)},n)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!!window.mc_networking_http_client_fix;return r&&!this.isSessionValid?Promise.reject("The user session has expired l94j96g - GET ".concat(e)):this.createRequest(e,"GET",t)}},{key:"post",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!!window.mc_networking_http_client_fix;return n&&!this.isSessionValid?Promise.reject("The user session has expired l94j96g - POST ".concat(e)):this.createRequest(e,"POST",ed(ep({},r),{body:t}))}},{key:"put",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.createRequest(e,"PUT",ed(ep({},r),{body:t}))}},{key:"patch",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.createRequest(e,"PATCH",ed(ep({},r),{body:t}))}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.createRequest(e,"DELETE",t)}},{key:"head",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.createRequest(e,"HEAD",t)}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t.prototype,e),t}();function eg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ev(e.options,e.headers)}let eb=eg({headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}),ew=Object.values({SECRET:"secret",HIGHLY_SENSITIVE:"highly_sensitive",SENSITIVE:"sensitive",RESTRICTED:"restricted",PUBLIC:"public"}),eA=["number","boolean","string","object"],e_=[ArrayBuffer,Date],eE=e=>eA.includes(typeof e)||e_.find(t=>e instanceof t)||null===e,eS=e=>Array.isArray(e)?0===e.map(eE).filter(e=>!e).length:eE(e);Symbol("proxy_target_identity");let eO=()=>{if(window===window.parent)return window;if(window.parent!==window.top)return window.parent;if(window.parent===window.top)try{return window.top.location.href,window.parent}catch(e){return window}},eF=eO(),ej=()=>{let e="";if(window.navigator.plugins){let t=eF.navigator.plugins;try{for(let r=0;r<t.length;r++)e+=`${t[r].name}|`;e=e.slice(0,e.length-1)}catch(e){}}return e},eI=()=>{let e=!1;if(eF.navigator.javaEnabled)try{e=eF.navigator.javaEnabled()}catch(e){}return e};function eP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eT={},ex={subscribe:function(e,t){var r=eT[e]||[];return eT[e]=((function(e){if(Array.isArray(e))return eP(e)})(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return eP(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eP(e,t)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([t]),ex.unsubscribe.bind(ex,e,t)},publish:function(e,t,r){(eT[e]||[]).forEach(function(e){return e(t,r)})},unsubscribe:function(e,t){e in eT&&(eT[e]=eT[e].filter(function(e){return e!==t}))}};window.addEventListener("message",function(e){var t=document.location.protocol+"//"+document.location.host;if(e.origin===t&&e.data&&e.data.channel){var r=e.data,n=r.channel,o=r.payload;ex.publish(n,o,e.source)}});var ek=eg({headers:{"Content-Type":"application/json",Accept:"application/json"}});(async()=>{let{intuitCompanyId:e="",intuitPseudonymId:t="",isDebugModeEnabled:r=!1,isInternal:n=!1,langPreference:o="",langPage:i="",mcLoginId:a="",mcUserId:s="",segmentWriteKey:c="",flags:l={}}=await function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return ek.post("/autolyse/index.php/twirp"+e,JSON.stringify(t),r).then(function(e){return e.ok?e.json():e.json().then(function(t){var r,n;return 401===e.status&&(null===(r=t.meta)||void 0===r?void 0:r.details)==="8p5e23b"&&ex.publish("reauth/403"),403===e.status&&(null===(n=t.meta)||void 0===n?void 0:n.details)==="3a321b3f"&&ex.publish("reauth/403"),console.error("Autolyse error: ".concat(t.code,"  ").concat(t.msg)),Promise.reject(t)})})}("/mailchimp.appshell.AnalyticsService/GetMeta",void 0,void 0),u=en.get("_mc_anon_id"),f=!u,p=eO(),d={all:{},track:{_mc_anon_id:u,internal_mc_user:n,browser_cookies_enabled:p.navigator.cookieEnabled,browser_encoding:document.characterSet,browser_height:p.innerHeight,browser_width:p.innerWidth,browser_plugins:ej(),browser_java_enabled:eI(),js_environment:"react"},identify:{},userSessionInfo:{user_id:s,login_id:a,company_id:e,pseudonym_id:t},allowList:f?["enriched_ecs_version","pseudonym_id","timezone","ivid","_mc_anon_id","internal_mc_user","user_id","login_id","company_id","initiative_name","library"]:null};if(f||(d.userSessionInfo={...d.userSessionInfo,lang_preference:o,lang_page:i}),f&&window.xp_ecs_screen_ivid_attributes){let e=en.get("ivid");e&&(d.track.ivid=e)}try{r&&X.debug(),await X.initialize(c,{retryQueue:!0},d,{loggerFunction:e=>{-1===window.location.hostname.indexOf("login.mailchimp.com")&&e.message&&e.data&&(e.data.library="react",function(e,t={}){!function({channelName:e,message:t,data:r={},classification:n}){if("string"!=typeof e)throw Error("channelName must be provided");if("string"!=typeof t)throw Error("message must be provided");if(n){if(!ew.includes(n))throw Error(`${n} is an unexpected logging classification`);r={log_classification:n,...r}}let o=new FormData;o.append("channelName",e),o.append("message",t),o.append("data",JSON.stringify(r)),eb.post("/track/log",o).catch(()=>{})}({channelName:"ecs-library",message:e,data:t})}(e.message,e.data))},validator:{track:eS}}),window.dispatchEvent(new Event("ecsLibraryInitialized"))}catch(e){window.dispatchEvent(new Event("ecsLibraryFailureToInitialize")),console.warn("Error initializing ECS tracking library.",e)}})()})()})();
//# sourceMappingURL=ecs-tracking.a7aa1cb36342a1d8.js.map
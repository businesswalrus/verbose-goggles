(()=>{"use strict";var e={},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,i),s.exports}i.rv=function(){return"1.2.0"},i.ruid="bundler=rspack@1.2.0";class r{config={intuitCookie:"cpra",oneTrustCookie:"OptanonConsent",oneTrustBannerCookie:"OptanonAlertBoxClosed"};categoryEnabled="1";categoryDisabled="0";oneTrustCategories={essential:"1",advertising:"4"};intuitToOnetrustMap={strictly_necessary_permission:this.oneTrustCategories.essential,advertising_permission:this.oneTrustCategories.advertising};oneTrustPreferences={};intuitPreferences={};static region={countryCode:"US",regionCode:"CA"};constructor(){window.mailchimp_cookie_preferences=window.mailchimp_cookie_preferences||{},window.mailchimp_cookie_preferences.syncPreferences=()=>{this.syncPreferences()}}static isCPRARegion(e,t){return e===r.region.countryCode&&t===r.region.regionCode}static initializeCPRA(e){let t=new r,i=r.getCookieValue(t.config.intuitCookie),n=r.getCookieValue(t.config.oneTrustCookie),s=r.getCookieValue(t.config.oneTrustBannerCookie);void 0!==n&&t.getOneTrustPreferences(n);let o=void 0!==i;o&&void 0===s&&t.supressBanner(e),o&&(t.getintuitPreferences(i),t.copyCookiePreferences(i,n,e))}reportError(e,t){void 0!==window.bugsnagClient&&"function"==typeof window.bugsnagClient.notify&&window.bugsnagClient.notify(e,e=>{e.addMetadata("context",t)})}extractActiveGroupsValues(e){return this.isolateOneTrustGroups(e).reduce((e,t)=>{let i=t.split(":");return e[i[0]]=i[1],e},{})}getOneTrustPreferences(e){return 0===Object.keys(this.getOneTrustPreferences).length&&(this.oneTrustPreferences=this.extractActiveGroupsValues(e)),this.oneTrustPreferences}isolateOneTrustGroups(e){let t=e.split("groups=")[1];return void 0===t?[]:t.split("&")[0].split(",")}static insertScript(e,t){let i=document.createElement("script");return i.src=e,t&&i.setAttribute("data-domain-script",t),document.body.appendChild(i),i.outerHTML}getintuitPreferences(e){let t=e.split("|");return this.intuitPreferences[this.intuitToOnetrustMap.strictly_necessary_permission]=t[0],this.intuitPreferences[this.intuitToOnetrustMap.advertising_permission]=t[1],this.intuitPreferences}copyCookiePreferences(e,t,i){let r=void 0!==t;if(void 0!==e){if(r||this.updatePreferences(e,"groups=1:1,2:0,3:0,4:0&isGpcEnabled=0",i),r&&!1===t.includes("groups")){let r=t+"&"+decodeURIComponent("groups=1%3A1%2C2%3A0%2C3%3A0%2C4%3A0");this.updatePreferences(e,r,i)}r&&this.isAdvertisingDifferent()&&this.updatePreferences(e,t,i)}}updatePreferences(e,t,i){let r=this.isolateOneTrustGroups(t);e.split("|").forEach((e,t)=>{switch(t){case 0:r[0]=`${this.oneTrustCategories.essential}:${e}`;break;case 1:r[3]=`${this.oneTrustCategories.advertising}:${e}`,this.oneTrustPreferences[this.oneTrustCategories.advertising]=e}});let n=t.replace(/(groups=)[^&]+/,"$1"+r);if(i){let e=new Date;e.setFullYear(e.getFullYear()+1),this.setCookie(this.config.oneTrustCookie,n,{domain:`.${i}; Samesite=Lax; secure`,expires:e})}else this.setCookie(this.config.oneTrustCookie,n);return n}static getCookieValue(e){let t=`${document.cookie}`.split(`${e}=`);if(2===t.length)return decodeURIComponent(t.pop().split(";").shift())}encodeCookie(e,t){let i=encodeURIComponent(","),n=encodeURIComponent(":"),s=new r;return(e===s.config.oneTrustCookie||e===s.config.oneTrustBannerCookie)&&(t=t.replace(/,/g,i).replace(/:/g,n)),e+"="+t}setCookie(e,t,{path:i="/",expires:r,domain:n}={}){let s=this.encodeCookie(e,t);return"string"==typeof i&&(s+=`;path=${i}`),void 0!==r&&"function"==typeof r.getMonth&&(s+=`;expires=${r}`),"string"==typeof n&&(s+=`;domain=${n}`),document.cookie=s,s}supressBanner(e,t=null,i=null){if(null===t&&(t=new Date().toISOString()),null===i){let i=new Date;i.setFullYear(i.getFullYear()+1),this.setCookie(this.config.oneTrustBannerCookie,t,{domain:`${e}; Samesite=Lax; secure`,expires:i})}else i();return t}getLawConfig(e){try{return window.intuit_gdpr.util.getLawConfig(e)}catch(e){return this.reportError("Unable to get law config",{error:e,hasGdprUtil:void 0!==window.intuit_gdpr}),{}}}setUserConsent(e,t,i){try{window.intuit_gdpr.util.setUserConsent(e,t,()=>{},e=>{this.reportError("Unable to sync consent",{failedEndpoints:e})},i)}catch(r){this.reportError("Unable to set user consent",{error:r,endponts:e,preferences:t,law:i,hasGdprUtil:void 0!==window.intuit_gdpr})}}mapOneTrustToIntuitPreferences(e,t=null){return null===t&&(t=window.OptanonActiveGroups),e.checkboxes.reduce((e,i)=>{let r=i.value,n=this.intuitToOnetrustMap[r];return n===this.oneTrustCategories.essential?e[i.value]=!0:e[i.value]=t.includes(n),e},{})}isAdvertisingDifferent(){return this.oneTrustPreferences[this.oneTrustCategories.advertising]!==this.intuitPreferences[this.intuitToOnetrustMap.advertising_permission]}shouldSyncPreferences(e=null){null===e&&(e=window.OptanonActiveGroups);let t=this.intuitPreferences[this.intuitToOnetrustMap.advertising_permission];if(void 0===t)return!0;let i=e.includes(this.oneTrustCategories.advertising);return t===this.categoryDisabled&&!0===i||t===this.categoryEnabled&&!1===i}syncPreferences(){if(!0===this.shouldSyncPreferences()){let e=this.getLawConfig(this.config.intuitCookie);if(0===Object.keys(e).length)return;let t=this.mapOneTrustToIntuitPreferences(e);this.setUserConsent(e.endpoints,t,this.config.intuitCookie)}}}(()=>{let e=document.querySelector('script[data-id="cookie-preferences-manager"]'),t=e.getAttribute("data-country-code"),i=e.getAttribute("data-region-code"),n=e.getAttribute("data-domain-script"),s=r.getCookieValue("MC_GEO_OVERRIDE");if(r.isCPRARegion(t,i)||"US|CA"===s){let t=e.getAttribute("data-host-name");r.initializeCPRA(t)}r.insertScript("https://cdn.cookielaw.org/scripttemplates/otSDKStub.js",n)})()})();
//# sourceMappingURL=cookie-preferences-manager.20fc3264ba1c0834.js.map